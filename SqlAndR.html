<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 9 SQL et R | Le Livre d’OHDSI</title>
  <meta name="description" content="Un livre sur les sciences et l’informatique des données de santé observationnelles (OHDSI). Il décrit la communauté OHDSI, les standards ouverts et les logiciels open-source." />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 9 SQL et R | Le Livre d’OHDSI" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://ohdsi.github.io/TheBookOfOhdsi/images/Cover/Cover.png" />
  <meta property="og:description" content="Un livre sur les sciences et l’informatique des données de santé observationnelles (OHDSI). Il décrit la communauté OHDSI, les standards ouverts et les logiciels open-source." />
  <meta name="github-repo" content="OHDSI/TheBookOfOhdsi" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 9 SQL et R | Le Livre d’OHDSI" />
  
  <meta name="twitter:description" content="Un livre sur les sciences et l’informatique des données de santé observationnelles (OHDSI). Il décrit la communauté OHDSI, les standards ouverts et les logiciels open-source." />
  <meta name="twitter:image" content="https://ohdsi.github.io/TheBookOfOhdsi/images/Cover/Cover.png" />

<meta name="author" content="Observational Health Data Sciences and Informatics" />


<meta name="date" content="2024-09-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="OhdsiAnalyticsTools.html"/>
<link rel="next" href="Cohortes.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-104086677-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-104086677-2');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Book of OHDSI</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Préface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objectifs-de-ce-livre"><i class="fa fa-check"></i>Objectifs de ce Livre</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure-du-livre"><i class="fa fa-check"></i>Structure du Livre</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributeurs"><i class="fa fa-check"></i>Contributeurs</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#versions-des-logiciels"><i class="fa fa-check"></i>Versions des Logiciels</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licence"><i class="fa fa-check"></i>Licence</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#développement-du-livre"><i class="fa fa-check"></i>Développement du Livre</a></li>
</ul></li>
<li class="part"><span><b>I La Communauté OHDSI</b></span></li>
<li class="chapter" data-level="1" data-path="OhdsiCommunity.html"><a href="OhdsiCommunity.html"><i class="fa fa-check"></i><b>1</b> La Communauté OHDSI</a>
<ul>
<li class="chapter" data-level="1.1" data-path="OhdsiCommunity.html"><a href="OhdsiCommunity.html#le-parcours-des-données-à-lévidence"><i class="fa fa-check"></i><b>1.1</b> Le Parcours des Données à l’Évidence</a></li>
<li class="chapter" data-level="1.2" data-path="OhdsiCommunity.html"><a href="OhdsiCommunity.html#observational-medical-outcomes-partnership"><i class="fa fa-check"></i><b>1.2</b> Observational Medical Outcomes Partnership</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="OhdsiCommunity.html"><a href="OhdsiCommunity.html#notre-mission"><i class="fa fa-check"></i><b>1.2.1</b> Notre Mission</a></li>
<li class="chapter" data-level="1.2.2" data-path="OhdsiCommunity.html"><a href="OhdsiCommunity.html#notre-vision"><i class="fa fa-check"></i><b>1.2.2</b> Notre Vision</a></li>
<li class="chapter" data-level="1.2.3" data-path="OhdsiCommunity.html"><a href="OhdsiCommunity.html#nos-objectifs"><i class="fa fa-check"></i><b>1.2.3</b> Nos Objectifs</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="OhdsiCommunity.html"><a href="OhdsiCommunity.html#les-progrès-de-lohdsi"><i class="fa fa-check"></i><b>1.3</b> Les Progrès de l’OHDSI</a></li>
<li class="chapter" data-level="1.4" data-path="OhdsiCommunity.html"><a href="OhdsiCommunity.html#collaborer-avec-ohdsi"><i class="fa fa-check"></i><b>1.4</b> Collaborer avec OHDSI</a></li>
<li class="chapter" data-level="1.5" data-path="OhdsiCommunity.html"><a href="OhdsiCommunity.html#résumé"><i class="fa fa-check"></i><b>1.5</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="WhereToBegin.html"><a href="WhereToBegin.html"><i class="fa fa-check"></i><b>2</b> Par où commencer</a>
<ul>
<li class="chapter" data-level="2.0.1" data-path="WhereToBegin.html"><a href="WhereToBegin.html#forums-ohdsi"><i class="fa fa-check"></i><b>2.0.1</b> Forums OHDSI</a></li>
<li class="chapter" data-level="2.0.2" data-path="WhereToBegin.html"><a href="WhereToBegin.html#événements-ohdsi"><i class="fa fa-check"></i><b>2.0.2</b> Événements OHDSI</a></li>
<li class="chapter" data-level="2.0.3" data-path="WhereToBegin.html"><a href="WhereToBegin.html#appels-de-la-communauté-ohdsi"><i class="fa fa-check"></i><b>2.0.3</b> Appels de la communauté OHDSI</a></li>
<li class="chapter" data-level="2.0.4" data-path="WhereToBegin.html"><a href="WhereToBegin.html#groupes-de-travail-ohdsi"><i class="fa fa-check"></i><b>2.0.4</b> Groupes de travail OHDSI</a></li>
<li class="chapter" data-level="2.0.5" data-path="WhereToBegin.html"><a href="WhereToBegin.html#chapitres-régionaux-ohdsi"><i class="fa fa-check"></i><b>2.0.5</b> Chapitres régionaux OHDSI</a></li>
<li class="chapter" data-level="2.0.6" data-path="WhereToBegin.html"><a href="WhereToBegin.html#réseau-de-recherche-ohdsi"><i class="fa fa-check"></i><b>2.0.6</b> Réseau de recherche OHDSI</a></li>
<li class="chapter" data-level="2.1" data-path="WhereToBegin.html"><a href="WhereToBegin.html#résumé-1"><i class="fa fa-check"></i><b>2.1</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="OpenScience.html"><a href="OpenScience.html"><i class="fa fa-check"></i><b>3</b> Science ouverte</a>
<ul>
<li class="chapter" data-level="3.1" data-path="OpenScience.html"><a href="OpenScience.html#science-ouverte"><i class="fa fa-check"></i><b>3.1</b> Science ouverte</a></li>
<li class="chapter" data-level="3.2" data-path="OpenScience.html"><a href="OpenScience.html#la-science-ouverte-en-action-le-study-a-thon"><i class="fa fa-check"></i><b>3.2</b> La Science Ouverte en Action : le Study-a-Thon</a></li>
<li class="chapter" data-level="3.3" data-path="OpenScience.html"><a href="OpenScience.html#normes-ouvertes"><i class="fa fa-check"></i><b>3.3</b> Normes Ouvertes</a></li>
<li class="chapter" data-level="3.4" data-path="OpenScience.html"><a href="OpenScience.html#open-data"><i class="fa fa-check"></i><b>3.4</b> Open Data</a></li>
<li class="chapter" data-level="3.5" data-path="OpenScience.html"><a href="OpenScience.html#open-discourse"><i class="fa fa-check"></i><b>3.5</b> Open Discourse</a></li>
<li class="chapter" data-level="3.6" data-path="OpenScience.html"><a href="OpenScience.html#ohdsi-et-les-principes-directeurs-fair"><i class="fa fa-check"></i><b>3.6</b> OHDSI et les Principes Directeurs FAIR</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="OpenScience.html"><a href="OpenScience.html#introduction"><i class="fa fa-check"></i><b>3.6.1</b> Introduction</a></li>
<li class="chapter" data-level="3.6.2" data-path="OpenScience.html"><a href="OpenScience.html#findability"><i class="fa fa-check"></i><b>3.6.2</b> Findability</a></li>
<li class="chapter" data-level="3.6.3" data-path="OpenScience.html"><a href="OpenScience.html#accessibility"><i class="fa fa-check"></i><b>3.6.3</b> Accessibility</a></li>
<li class="chapter" data-level="3.6.4" data-path="OpenScience.html"><a href="OpenScience.html#interoperability"><i class="fa fa-check"></i><b>3.6.4</b> Interoperability</a></li>
<li class="chapter" data-level="3.6.5" data-path="OpenScience.html"><a href="OpenScience.html#reusability"><i class="fa fa-check"></i><b>3.6.5</b> Reusability</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Représentation Uniforme des Données</b></span></li>
<li class="chapter" data-level="4" data-path="CommonDataModel.html"><a href="CommonDataModel.html"><i class="fa fa-check"></i><b>4</b> Le Modèle de Données Commun</a>
<ul>
<li class="chapter" data-level="4.1" data-path="CommonDataModel.html"><a href="CommonDataModel.html#principes-de-conception"><i class="fa fa-check"></i><b>4.1</b> Principes de Conception</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="CommonDataModel.html"><a href="CommonDataModel.html#model-Conv"><i class="fa fa-check"></i><b>4.1.1</b> Conventions Générales du Modèle</a></li>
<li class="chapter" data-level="4.1.2" data-path="CommonDataModel.html"><a href="CommonDataModel.html#conventions-générales-des-schémas"><i class="fa fa-check"></i><b>4.1.2</b> Conventions Générales des Schémas</a></li>
<li class="chapter" data-level="4.1.3" data-path="CommonDataModel.html"><a href="CommonDataModel.html#conventions-générales-des-tables-de-données"><i class="fa fa-check"></i><b>4.1.3</b> Conventions Générales des Tables de Données</a></li>
<li class="chapter" data-level="4.1.4" data-path="CommonDataModel.html"><a href="CommonDataModel.html#domains"><i class="fa fa-check"></i><b>4.1.4</b> Conventions Générales des Domaines</a></li>
<li class="chapter" data-level="4.1.5" data-path="CommonDataModel.html"><a href="CommonDataModel.html#représentation-du-contenu-par-des-concepts"><i class="fa fa-check"></i><b>4.1.5</b> Représentation du Contenu par des Concepts</a></li>
<li class="chapter" data-level="4.1.6" data-path="CommonDataModel.html"><a href="CommonDataModel.html#conventions-générales-de-nomination-des-champs"><i class="fa fa-check"></i><b>4.1.6</b> Conventions Générales de Nomination des Champs</a></li>
<li class="chapter" data-level="4.1.7" data-path="CommonDataModel.html"><a href="CommonDataModel.html#concepts-Sources"><i class="fa fa-check"></i><b>4.1.7</b> Différence Entre Concepts et Valeurs Sources</a></li>
<li class="chapter" data-level="4.1.8" data-path="CommonDataModel.html"><a href="CommonDataModel.html#exemple-en-cours-endométriose"><i class="fa fa-check"></i><b>4.1.8</b> Exemple en cours : Endométriose</a></li>
<li class="chapter" data-level="4.1.9" data-path="CommonDataModel.html"><a href="CommonDataModel.html#person"><i class="fa fa-check"></i><b>4.1.9</b> Tableau PERSON</a></li>
<li class="chapter" data-level="4.1.10" data-path="CommonDataModel.html"><a href="CommonDataModel.html#observationPeriod"><i class="fa fa-check"></i><b>4.1.10</b> Tableau OBSERVATION_PERIOD</a></li>
<li class="chapter" data-level="4.1.11" data-path="CommonDataModel.html"><a href="CommonDataModel.html#visitOccurrence"><i class="fa fa-check"></i><b>4.1.11</b> VISIT_OCCURRENCE</a></li>
<li class="chapter" data-level="4.1.12" data-path="CommonDataModel.html"><a href="CommonDataModel.html#conditionOccurrence"><i class="fa fa-check"></i><b>4.1.12</b> CONDITION_OCCURRENCE</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="CommonDataModel.html"><a href="CommonDataModel.html#informations-supplémentaires"><i class="fa fa-check"></i><b>4.2</b> Informations supplémentaires</a></li>
<li class="chapter" data-level="4.3" data-path="CommonDataModel.html"><a href="CommonDataModel.html#résumé-2"><i class="fa fa-check"></i><b>4.3</b> Résumé</a></li>
<li class="chapter" data-level="4.4" data-path="CommonDataModel.html"><a href="CommonDataModel.html#exercices"><i class="fa fa-check"></i><b>4.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html"><i class="fa fa-check"></i><b>5</b> Vocabulaire normalisé</a>
<ul>
<li class="chapter" data-level="5.1" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#pourquoi-les-vocabulaires-et-pourquoi-les-normaliser"><i class="fa fa-check"></i><b>5.1</b> Pourquoi les vocabulaires, et pourquoi les normaliser</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#construire-les-vocabulaire-normalisé"><i class="fa fa-check"></i><b>5.1.1</b> Construire les Vocabulaire normalisé</a></li>
<li class="chapter" data-level="5.1.2" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#accessVocabularies"><i class="fa fa-check"></i><b>5.1.2</b> Accès aux Vocabulaire normalisé</a></li>
<li class="chapter" data-level="5.1.3" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#source-des-vocabulaires-adopter-ou-construire"><i class="fa fa-check"></i><b>5.1.3</b> Source des vocabulaires : Adopter ou Construire</a></li>
<li class="chapter" data-level="5.1.4" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#identifiants-de-concepts"><i class="fa fa-check"></i><b>5.1.4</b> Identifiants de concepts</a></li>
<li class="chapter" data-level="5.1.5" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#noms-de-concepts"><i class="fa fa-check"></i><b>5.1.5</b> Noms de concepts</a></li>
<li class="chapter" data-level="5.1.6" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#conceptDomains"><i class="fa fa-check"></i><b>5.1.6</b> Domaines</a></li>
<li class="chapter" data-level="5.1.7" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#vocabulaires"><i class="fa fa-check"></i><b>5.1.7</b> Vocabulaires</a></li>
<li class="chapter" data-level="5.1.8" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#classes-de-concepts"><i class="fa fa-check"></i><b>5.1.8</b> Classes de concepts</a></li>
<li class="chapter" data-level="5.1.9" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#standardConcepts"><i class="fa fa-check"></i><b>5.1.9</b> Concepts standards</a></li>
<li class="chapter" data-level="5.1.10" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#concepts-non-standards"><i class="fa fa-check"></i><b>5.1.10</b> Concepts non standards</a></li>
<li class="chapter" data-level="5.1.11" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#concepts-de-classification"><i class="fa fa-check"></i><b>5.1.11</b> Concepts de classification</a></li>
<li class="chapter" data-level="5.1.12" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#codes-de-concepts"><i class="fa fa-check"></i><b>5.1.12</b> Codes de concepts</a></li>
<li class="chapter" data-level="5.1.13" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#conceptLifeCycle"><i class="fa fa-check"></i><b>5.1.13</b> Cycle de vie</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#relations"><i class="fa fa-check"></i><b>5.2</b> Relations</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#conceptMapping"><i class="fa fa-check"></i><b>5.2.1</b> Relations de Mapping</a></li>
<li class="chapter" data-level="5.2.2" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#relations-hiérarchiques"><i class="fa fa-check"></i><b>5.2.2</b> Relations Hiérarchiques</a></li>
<li class="chapter" data-level="5.2.3" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#relations-entre-concepts-de-différents-vocabulaires"><i class="fa fa-check"></i><b>5.2.3</b> Relations Entre Concepts de Différents Vocabulaires</a></li>
<li class="chapter" data-level="5.2.4" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#relations-entre-concepts-du-même-vocabulaire"><i class="fa fa-check"></i><b>5.2.4</b> Relations Entre Concepts du Même Vocabulaire</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#conceptAncestor"><i class="fa fa-check"></i><b>5.3</b> Hiérarchie</a></li>
<li class="chapter" data-level="5.4" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#tables-de-référence-interne"><i class="fa fa-check"></i><b>5.4</b> Tables de Référence Interne</a></li>
<li class="chapter" data-level="5.5" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#specialSituations"><i class="fa fa-check"></i><b>5.5</b> Situations Spéciales</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#genre"><i class="fa fa-check"></i><b>5.5.1</b> Genre</a></li>
<li class="chapter" data-level="5.5.2" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#race-et-ethnicité"><i class="fa fa-check"></i><b>5.5.2</b> Race et Ethnicité</a></li>
<li class="chapter" data-level="5.5.3" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#schémas-de-codage-diagnostique-et-conditions-omop"><i class="fa fa-check"></i><b>5.5.3</b> Schémas de Codage Diagnostique et Conditions OMOP</a></li>
<li class="chapter" data-level="5.5.4" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#systèmes-de-codage-de-procédures"><i class="fa fa-check"></i><b>5.5.4</b> Systèmes de Codage de Procédures</a></li>
<li class="chapter" data-level="5.5.5" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#dispositifs"><i class="fa fa-check"></i><b>5.5.5</b> Dispositifs</a></li>
<li class="chapter" data-level="5.5.6" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#visites-et-services"><i class="fa fa-check"></i><b>5.5.6</b> Visites et Services</a></li>
<li class="chapter" data-level="5.5.7" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#fournisseurs-et-spécialités"><i class="fa fa-check"></i><b>5.5.7</b> Fournisseurs et Spécialités</a></li>
<li class="chapter" data-level="5.5.8" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#domaines-thérapeutiques-aux-besoins-spéciaux"><i class="fa fa-check"></i><b>5.5.8</b> Domaines Thérapeutiques aux Besoins Spéciaux</a></li>
<li class="chapter" data-level="5.5.9" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#rxNormExtension"><i class="fa fa-check"></i><b>5.5.9</b> Concepts Standards dans le Domaine des Médicaments</a></li>
<li class="chapter" data-level="5.5.10" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#variantes-de-null"><i class="fa fa-check"></i><b>5.5.10</b> Variantes de NULL</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#résumé-3"><i class="fa fa-check"></i><b>5.6</b> Résumé</a></li>
<li class="chapter" data-level="5.7" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html#exercices-1"><i class="fa fa-check"></i><b>5.7</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html"><i class="fa fa-check"></i><b>6</b> Extraction, Transformation et Chargement</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#introduction-1"><i class="fa fa-check"></i><b>6.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#white-rabbit"><i class="fa fa-check"></i><b>6.1.1</b> White Rabbit</a></li>
<li class="chapter" data-level="6.1.2" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#rabbit-in-a-hat"><i class="fa fa-check"></i><b>6.1.2</b> Rabbit-In-a-Hat</a></li>
<li class="chapter" data-level="6.1.3" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#usagi"><i class="fa fa-check"></i><b>6.1.3</b> Usagi</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#étape-4-contrôle-de-qualité"><i class="fa fa-check"></i><b>6.2</b> Étape 4 : Contrôle de Qualité</a></li>
<li class="chapter" data-level="6.3" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#conventions-etl-et-themis"><i class="fa fa-check"></i><b>6.3</b> Conventions ETL et THEMIS</a></li>
<li class="chapter" data-level="6.4" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#CDMandETLMaintenance"><i class="fa fa-check"></i><b>6.4</b> Maintenance du CDM et de l’ETL</a></li>
<li class="chapter" data-level="6.5" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#réflexions-finales-sur-letl"><i class="fa fa-check"></i><b>6.5</b> Réflexions finales sur l’ETL</a></li>
<li class="chapter" data-level="6.6" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#résumé-4"><i class="fa fa-check"></i><b>6.6</b> Résumé</a></li>
<li class="chapter" data-level="6.7" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#exercices-2"><i class="fa fa-check"></i><b>6.7</b> Exercices</a></li>
</ul></li>
<li class="part"><span><b>III Analyse des Données</b></span></li>
<li class="chapter" data-level="7" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html"><i class="fa fa-check"></i><b>7</b> Cas d’utilisation de l’analyse des données</a>
<ul>
<li class="chapter" data-level="7.1" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#caractérisation"><i class="fa fa-check"></i><b>7.1</b> Caractérisation</a></li>
<li class="chapter" data-level="7.2" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#estimation-au-niveau-de-la-population"><i class="fa fa-check"></i><b>7.2</b> Estimation Au Niveau De La Population</a></li>
<li class="chapter" data-level="7.3" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#prédiction-au-niveau-du-patient"><i class="fa fa-check"></i><b>7.3</b> Prédiction Au Niveau Du Patient</a></li>
<li class="chapter" data-level="7.4" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#exemples-de-cas-dutilisation-dans-lhypertension"><i class="fa fa-check"></i><b>7.4</b> Exemples De Cas D’utilisation Dans L’Hypertension</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#questions-de-caractérisation"><i class="fa fa-check"></i><b>7.4.1</b> Questions de Caractérisation</a></li>
<li class="chapter" data-level="7.4.2" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#question-destimation-au-niveau-de-la-population"><i class="fa fa-check"></i><b>7.4.2</b> Question D’estimation Au Niveau De La Population</a></li>
<li class="chapter" data-level="7.4.3" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#question-de-prédiction-au-niveau-du-patient"><i class="fa fa-check"></i><b>7.4.3</b> Question De Prédiction Au Niveau Du Patient</a></li>
<li class="chapter" data-level="7.4.4" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#données-erronées"><i class="fa fa-check"></i><b>7.4.4</b> Données Erronées</a></li>
<li class="chapter" data-level="7.4.5" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#données-manquantes"><i class="fa fa-check"></i><b>7.4.5</b> Données Manquantes</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#résumé-5"><i class="fa fa-check"></i><b>7.5</b> Résumé</a></li>
<li class="chapter" data-level="7.6" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#exercices-3"><i class="fa fa-check"></i><b>7.6</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html"><i class="fa fa-check"></i><b>8</b> Outils d’analyse d’OHDSI</a>
<ul>
<li class="chapter" data-level="8.1" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#analysisImplementation"><i class="fa fa-check"></i><b>8.1</b> Implémentation de l’analyse</a></li>
<li class="chapter" data-level="8.2" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#stratégies-danalyse"><i class="fa fa-check"></i><b>8.2</b> Stratégies d’analyse</a></li>
<li class="chapter" data-level="8.3" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#atlas"><i class="fa fa-check"></i><b>8.3</b> ATLAS</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#sécurité"><i class="fa fa-check"></i><b>8.3.1</b> Sécurité</a></li>
<li class="chapter" data-level="8.3.2" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#documentation"><i class="fa fa-check"></i><b>8.3.2</b> Documentation</a></li>
<li class="chapter" data-level="8.3.3" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#comment-installer"><i class="fa fa-check"></i><b>8.3.3</b> Comment installer</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#bibliothèque-de-méthodes"><i class="fa fa-check"></i><b>8.4</b> Bibliothèque de Méthodes</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#support-pour-les-analyses-à-grande-échelle"><i class="fa fa-check"></i><b>8.4.1</b> Support pour les Analyses à Grande Échelle</a></li>
<li class="chapter" data-level="8.4.2" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#BigDataSupport"><i class="fa fa-check"></i><b>8.4.2</b> Support pour les Big Data</a></li>
<li class="chapter" data-level="8.4.3" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#documentation-1"><i class="fa fa-check"></i><b>8.4.3</b> Documentation</a></li>
<li class="chapter" data-level="8.4.4" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#exigences-systémiques"><i class="fa fa-check"></i><b>8.4.4</b> Exigences Systémiques</a></li>
<li class="chapter" data-level="8.4.5" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#installR"><i class="fa fa-check"></i><b>8.4.5</b> Comment Installer</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#stratégies-de-déploiement"><i class="fa fa-check"></i><b>8.5</b> Stratégies de déploiement</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#broadsea"><i class="fa fa-check"></i><b>8.5.1</b> Broadsea</a></li>
<li class="chapter" data-level="8.5.2" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#amazon-aws"><i class="fa fa-check"></i><b>8.5.2</b> Amazon AWS</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#résumé-6"><i class="fa fa-check"></i><b>8.6</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="SqlAndR.html"><a href="SqlAndR.html"><i class="fa fa-check"></i><b>9</b> SQL et R</a>
<ul>
<li class="chapter" data-level="9.1" data-path="SqlAndR.html"><a href="SqlAndR.html#SqlRender"><i class="fa fa-check"></i><b>9.1</b> SqlRender</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="SqlAndR.html"><a href="SqlAndR.html#paramétrage-sql"><i class="fa fa-check"></i><b>9.1.1</b> Paramétrage SQL</a></li>
<li class="chapter" data-level="9.1.2" data-path="SqlAndR.html"><a href="SqlAndR.html#traduction-vers-dautres-dialectes-sql"><i class="fa fa-check"></i><b>9.1.2</b> Traduction vers d’Autres Dialectes SQL</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="SqlAndR.html"><a href="SqlAndR.html#DatabaseConnector"><i class="fa fa-check"></i><b>9.2</b> DatabaseConnector</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="SqlAndR.html"><a href="SqlAndR.html#création-dune-connexion"><i class="fa fa-check"></i><b>9.2.1</b> Création d’une Connexion</a></li>
<li class="chapter" data-level="9.2.2" data-path="SqlAndR.html"><a href="SqlAndR.html#interroger"><i class="fa fa-check"></i><b>9.2.2</b> Interroger</a></li>
<li class="chapter" data-level="9.2.3" data-path="SqlAndR.html"><a href="SqlAndR.html#interroger-en-utilisant-les-objets-ffdf"><i class="fa fa-check"></i><b>9.2.3</b> Interroger en Utilisant les Objets Ffdf</a></li>
<li class="chapter" data-level="9.2.4" data-path="SqlAndR.html"><a href="SqlAndR.html#interroger-différentes-plateformes-en-utilisant-le-même-sql"><i class="fa fa-check"></i><b>9.2.4</b> Interroger Différentes Plateformes en Utilisant le Même SQL</a></li>
<li class="chapter" data-level="9.2.5" data-path="SqlAndR.html"><a href="SqlAndR.html#insérer-des-tables"><i class="fa fa-check"></i><b>9.2.5</b> Insérer des Tables</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="SqlAndR.html"><a href="SqlAndR.html#QueryTheCdm"><i class="fa fa-check"></i><b>9.3</b> Interroger le CDM</a></li>
<li class="chapter" data-level="9.4" data-path="SqlAndR.html"><a href="SqlAndR.html#utiliser-le-vocabulaire-lors-de-linterrogation"><i class="fa fa-check"></i><b>9.4</b> Utiliser le Vocabulaire Lors de l’Interrogation</a></li>
<li class="chapter" data-level="9.5" data-path="SqlAndR.html"><a href="SqlAndR.html#querylibrary"><i class="fa fa-check"></i><b>9.5</b> QueryLibrary</a></li>
<li class="chapter" data-level="9.6" data-path="SqlAndR.html"><a href="SqlAndR.html#concevoir-une-étude-simple"><i class="fa fa-check"></i><b>9.6</b> Concevoir une Étude Simple</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="SqlAndR.html"><a href="SqlAndR.html#définition-du-problème"><i class="fa fa-check"></i><b>9.6.1</b> Définition du Problème</a></li>
<li class="chapter" data-level="9.6.2" data-path="SqlAndR.html"><a href="SqlAndR.html#exposition"><i class="fa fa-check"></i><b>9.6.2</b> Exposition</a></li>
<li class="chapter" data-level="9.6.3" data-path="SqlAndR.html"><a href="SqlAndR.html#résultat"><i class="fa fa-check"></i><b>9.6.3</b> Résultat</a></li>
<li class="chapter" data-level="9.6.4" data-path="SqlAndR.html"><a href="SqlAndR.html#temps-à-risque"><i class="fa fa-check"></i><b>9.6.4</b> Temps à Risque</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="SqlAndR.html"><a href="SqlAndR.html#implémenter-létude-en-utilisant-sql-et-r"><i class="fa fa-check"></i><b>9.7</b> Implémenter l’Étude en Utilisant SQL et R</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="SqlAndR.html"><a href="SqlAndR.html#cohorte-dexposition"><i class="fa fa-check"></i><b>9.7.1</b> Cohorte d’Exposition</a></li>
<li class="chapter" data-level="9.7.2" data-path="SqlAndR.html"><a href="SqlAndR.html#cohorte-de-résultat"><i class="fa fa-check"></i><b>9.7.2</b> Cohorte de Résultat</a></li>
<li class="chapter" data-level="9.7.3" data-path="SqlAndR.html"><a href="SqlAndR.html#calcul-du-taux-dincidence"><i class="fa fa-check"></i><b>9.7.3</b> Calcul du Taux d’Incidence</a></li>
<li class="chapter" data-level="9.7.4" data-path="SqlAndR.html"><a href="SqlAndR.html#nettoyage"><i class="fa fa-check"></i><b>9.7.4</b> Nettoyage</a></li>
<li class="chapter" data-level="9.7.5" data-path="SqlAndR.html"><a href="SqlAndR.html#compatibilité"><i class="fa fa-check"></i><b>9.7.5</b> Compatibilité</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="SqlAndR.html"><a href="SqlAndR.html#résumé-7"><i class="fa fa-check"></i><b>9.8</b> Résumé</a></li>
<li class="chapter" data-level="9.9" data-path="SqlAndR.html"><a href="SqlAndR.html#exercices-4"><i class="fa fa-check"></i><b>9.9</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Cohortes.html"><a href="Cohortes.html"><i class="fa fa-check"></i><b>10</b> Définir des Cohortes</a>
<ul>
<li class="chapter" data-level="10.1" data-path="Cohortes.html"><a href="Cohortes.html#quest-ce-quune-cohorte"><i class="fa fa-check"></i><b>10.1</b> Qu’est-ce qu’une Cohorte ?</a></li>
<li class="chapter" data-level="10.2" data-path="Cohortes.html"><a href="Cohortes.html#conceptSets"><i class="fa fa-check"></i><b>10.2</b> Ensembles de Concepts</a></li>
<li class="chapter" data-level="10.3" data-path="Cohortes.html"><a href="Cohortes.html#définitions-de-cohorte-probabilistes"><i class="fa fa-check"></i><b>10.3</b> Définitions de Cohorte Probabilistes</a></li>
<li class="chapter" data-level="10.4" data-path="Cohortes.html"><a href="Cohortes.html#validité-de-la-définition-dune-cohorte"><i class="fa fa-check"></i><b>10.4</b> Validité de la Définition d’une Cohorte</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="Cohortes.html"><a href="Cohortes.html#bibliothèque-de-phénotypes-gold-standard-dohdsi"><i class="fa fa-check"></i><b>10.4.1</b> Bibliothèque de Phénotypes Gold Standard d’OHDSI</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="Cohortes.html"><a href="Cohortes.html#définir-une-cohorte-pour-lhypertension"><i class="fa fa-check"></i><b>10.5</b> Définir une Cohorte pour l’Hypertension</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="Cohortes.html"><a href="Cohortes.html#critères-de-lévénement-initial"><i class="fa fa-check"></i><b>10.5.1</b> Critères de l’Événement Initial</a></li>
<li class="chapter" data-level="10.5.2" data-path="Cohortes.html"><a href="Cohortes.html#définir-lensemble-de-concepts"><i class="fa fa-check"></i><b>10.5.2</b> Définir l’Ensemble de Concepts</a></li>
<li class="chapter" data-level="10.5.3" data-path="Cohortes.html"><a href="Cohortes.html#critères-additionnels-de-lévénement-initial"><i class="fa fa-check"></i><b>10.5.3</b> Critères Additionnels de l’Événement Initial</a></li>
<li class="chapter" data-level="10.5.4" data-path="Cohortes.html"><a href="Cohortes.html#critères-dinclusion"><i class="fa fa-check"></i><b>10.5.4</b> Critères d’Inclusion</a></li>
<li class="chapter" data-level="10.5.5" data-path="Cohortes.html"><a href="Cohortes.html#connexion-à-la-base-de-données"><i class="fa fa-check"></i><b>10.5.5</b> Connexion à la Base de Données</a></li>
<li class="chapter" data-level="10.5.6" data-path="Cohortes.html"><a href="Cohortes.html#spécification-des-concepts"><i class="fa fa-check"></i><b>10.5.6</b> Spécification des Concepts</a></li>
<li class="chapter" data-level="10.5.7" data-path="Cohortes.html"><a href="Cohortes.html#trouver-la-première-utilisation"><i class="fa fa-check"></i><b>10.5.7</b> Trouver la Première Utilisation</a></li>
<li class="chapter" data-level="10.5.8" data-path="Cohortes.html"><a href="Cohortes.html#exiger-365-jours-dobservation-préalable"><i class="fa fa-check"></i><b>10.5.8</b> Exiger 365 Jours d’Observation Préalable</a></li>
<li class="chapter" data-level="10.5.9" data-path="Cohortes.html"><a href="Cohortes.html#exiger-une-hypertension-préalable"><i class="fa fa-check"></i><b>10.5.9</b> Exiger une Hypertension Préalable</a></li>
<li class="chapter" data-level="10.5.10" data-path="Cohortes.html"><a href="Cohortes.html#pas-de-traitement-préalable"><i class="fa fa-check"></i><b>10.5.10</b> Pas de Traitement Préalable</a></li>
<li class="chapter" data-level="10.5.11" data-path="Cohortes.html"><a href="Cohortes.html#monothérapie"><i class="fa fa-check"></i><b>10.5.11</b> Monothérapie</a></li>
<li class="chapter" data-level="10.5.12" data-path="Cohortes.html"><a href="Cohortes.html#sortie-de-la-cohorte"><i class="fa fa-check"></i><b>10.5.12</b> Sortie de la Cohorte</a></li>
<li class="chapter" data-level="10.5.13" data-path="Cohortes.html"><a href="Cohortes.html#nettoyage-1"><i class="fa fa-check"></i><b>10.5.13</b> Nettoyage</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="Cohortes.html"><a href="Cohortes.html#résumé-8"><i class="fa fa-check"></i><b>10.6</b> Résumé</a></li>
<li class="chapter" data-level="10.7" data-path="Cohortes.html"><a href="Cohortes.html#exercices-5"><i class="fa fa-check"></i><b>10.7</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Characterization.html"><a href="Characterization.html"><i class="fa fa-check"></i><b>11</b> Characterization</a>
<ul>
<li class="chapter" data-level="11.1" data-path="Characterization.html"><a href="Characterization.html#caractérisation-au-niveau-de-la-base-de-données"><i class="fa fa-check"></i><b>11.1</b> Caractérisation au Niveau de la Base de Données</a></li>
<li class="chapter" data-level="11.2" data-path="Characterization.html"><a href="Characterization.html#caractérisation-de-la-cohorte"><i class="fa fa-check"></i><b>11.2</b> Caractérisation de la Cohorte</a></li>
<li class="chapter" data-level="11.3" data-path="Characterization.html"><a href="Characterization.html#chemins-de-traitement"><i class="fa fa-check"></i><b>11.3</b> Chemins de Traitement</a></li>
<li class="chapter" data-level="11.4" data-path="Characterization.html"><a href="Characterization.html#incidence"><i class="fa fa-check"></i><b>11.4</b> Incidence</a></li>
<li class="chapter" data-level="11.5" data-path="Characterization.html"><a href="Characterization.html#caractériser-les-personnes-hypertendues"><i class="fa fa-check"></i><b>11.5</b> Caractériser les personnes hypertendues</a></li>
<li class="chapter" data-level="11.6" data-path="Characterization.html"><a href="Characterization.html#caractérisation-de-la-base-de-données-dans-atlas"><i class="fa fa-check"></i><b>11.6</b> Caractérisation de la base de données dans ATLAS</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="Characterization.html"><a href="Characterization.html#conception"><i class="fa fa-check"></i><b>11.6.1</b> Conception</a></li>
<li class="chapter" data-level="11.6.2" data-path="Characterization.html"><a href="Characterization.html#exécutions"><i class="fa fa-check"></i><b>11.6.2</b> Exécutions</a></li>
<li class="chapter" data-level="11.6.3" data-path="Characterization.html"><a href="Characterization.html#résultats"><i class="fa fa-check"></i><b>11.6.3</b> Résultats</a></li>
<li class="chapter" data-level="11.6.4" data-path="Characterization.html"><a href="Characterization.html#définir-des-caractéristiques-personnalisées"><i class="fa fa-check"></i><b>11.6.4</b> Définir des Caractéristiques Personnalisées</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="Characterization.html"><a href="Characterization.html#caractérisation-des-cohortes-en-r"><i class="fa fa-check"></i><b>11.7</b> Caractérisation des Cohortes en R</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="Characterization.html"><a href="Characterization.html#instauration-des-cohortes"><i class="fa fa-check"></i><b>11.7.1</b> Instauration des Cohortes</a></li>
<li class="chapter" data-level="11.7.2" data-path="Characterization.html"><a href="Characterization.html#extraction-des-données"><i class="fa fa-check"></i><b>11.7.2</b> Extraction des Données</a></li>
<li class="chapter" data-level="11.7.3" data-path="Characterization.html"><a href="Characterization.html#utilisation-des-analyses-prédéfinies"><i class="fa fa-check"></i><b>11.7.3</b> Utilisation des Analyses Prédéfinies</a></li>
<li class="chapter" data-level="11.7.4" data-path="Characterization.html"><a href="Characterization.html#création-de-covariables-agrégées"><i class="fa fa-check"></i><b>11.7.4</b> Création de Covariables Agrégées</a></li>
<li class="chapter" data-level="11.7.5" data-path="Characterization.html"><a href="Characterization.html#format-de-sortie"><i class="fa fa-check"></i><b>11.7.5</b> Format de Sortie</a></li>
<li class="chapter" data-level="11.7.6" data-path="Characterization.html"><a href="Characterization.html#covariables-personnalisées"><i class="fa fa-check"></i><b>11.7.6</b> Covariables Personnalisées</a></li>
<li class="chapter" data-level="11.7.7" data-path="Characterization.html"><a href="Characterization.html#conception-1"><i class="fa fa-check"></i><b>11.7.7</b> Conception</a></li>
<li class="chapter" data-level="11.7.8" data-path="Characterization.html"><a href="Characterization.html#exécutions-1"><i class="fa fa-check"></i><b>11.7.8</b> Exécutions</a></li>
<li class="chapter" data-level="11.7.9" data-path="Characterization.html"><a href="Characterization.html#visualisation-des-résultats"><i class="fa fa-check"></i><b>11.7.9</b> Visualisation des résultats</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="Characterization.html"><a href="Characterization.html#analyse-dincidence-dans-atlas"><i class="fa fa-check"></i><b>11.8</b> Analyse d’incidence dans ATLAS</a>
<ul>
<li class="chapter" data-level="11.8.1" data-path="Characterization.html"><a href="Characterization.html#conception-2"><i class="fa fa-check"></i><b>11.8.1</b> Conception</a></li>
<li class="chapter" data-level="11.8.2" data-path="Characterization.html"><a href="Characterization.html#exécutions-2"><i class="fa fa-check"></i><b>11.8.2</b> Exécutions</a></li>
<li class="chapter" data-level="11.8.3" data-path="Characterization.html"><a href="Characterization.html#visualisation-des-résultats-1"><i class="fa fa-check"></i><b>11.8.3</b> Visualisation des résultats</a></li>
</ul></li>
<li class="chapter" data-level="11.9" data-path="Characterization.html"><a href="Characterization.html#résumé-9"><i class="fa fa-check"></i><b>11.9</b> Résumé</a></li>
<li class="chapter" data-level="11.10" data-path="Characterization.html"><a href="Characterization.html#exercices-6"><i class="fa fa-check"></i><b>11.10</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html"><i class="fa fa-check"></i><b>12</b> Estimation au Niveau de la Population</a>
<ul>
<li class="chapter" data-level="12.1" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#CohortMethod"><i class="fa fa-check"></i><b>12.1</b> La Méthode Cohorte</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#scores-de-propension"><i class="fa fa-check"></i><b>12.1.1</b> Scores de Propension</a></li>
<li class="chapter" data-level="12.1.2" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#VariableSelection"><i class="fa fa-check"></i><b>12.1.2</b> Sélection des Variables</a></li>
<li class="chapter" data-level="12.1.3" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#caliper"><i class="fa fa-check"></i><b>12.1.3</b> Caliper</a></li>
<li class="chapter" data-level="12.1.4" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#chevauchement-scores-de-préférence"><i class="fa fa-check"></i><b>12.1.4</b> Chevauchement : Scores de Préférence</a></li>
<li class="chapter" data-level="12.1.5" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#équilibre"><i class="fa fa-check"></i><b>12.1.5</b> Équilibre</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#le-design-cas-témoin"><i class="fa fa-check"></i><b>12.2</b> Le Design Cas-Témoin</a></li>
<li class="chapter" data-level="12.3" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#le-design-de-cas-croisés"><i class="fa fa-check"></i><b>12.3</b> Le Design de Cas-Croisés</a></li>
<li class="chapter" data-level="12.4" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#concevoir-une-étude-sur-lhypertension"><i class="fa fa-check"></i><b>12.4</b> Concevoir une Étude sur l’Hypertension</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#définition-du-problème-1"><i class="fa fa-check"></i><b>12.4.1</b> Définition du Problème</a></li>
<li class="chapter" data-level="12.4.2" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#cible-et-comparateur"><i class="fa fa-check"></i><b>12.4.2</b> Cible et Comparateur</a></li>
<li class="chapter" data-level="12.4.3" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#résultat-1"><i class="fa fa-check"></i><b>12.4.3</b> Résultat</a></li>
<li class="chapter" data-level="12.4.4" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#temps-à-risque-1"><i class="fa fa-check"></i><b>12.4.4</b> Temps à Risque</a></li>
<li class="chapter" data-level="12.4.5" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#modèle"><i class="fa fa-check"></i><b>12.4.5</b> Modèle</a></li>
<li class="chapter" data-level="12.4.6" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#résumé-de-létude"><i class="fa fa-check"></i><b>12.4.6</b> Résumé de l’Étude</a></li>
<li class="chapter" data-level="12.4.7" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#questions-de-contrôle"><i class="fa fa-check"></i><b>12.4.7</b> Questions de Contrôle</a></li>
<li class="chapter" data-level="12.4.8" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#ComparisonSettings"><i class="fa fa-check"></i><b>12.4.8</b> Paramètres de cohorte comparative</a></li>
<li class="chapter" data-level="12.4.9" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#paramètres-danalyse-de-lestimation-des-effets"><i class="fa fa-check"></i><b>12.4.9</b> Paramètres d’analyse de l’estimation des effets</a></li>
<li class="chapter" data-level="12.4.10" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#instanciation-de-la-cohorte"><i class="fa fa-check"></i><b>12.4.10</b> Instanciation de la Cohorte</a></li>
<li class="chapter" data-level="12.4.11" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#extraction-des-données-1"><i class="fa fa-check"></i><b>12.4.11</b> Extraction des Données</a></li>
<li class="chapter" data-level="12.4.12" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#définir-la-population-de-létude"><i class="fa fa-check"></i><b>12.4.12</b> Définir la Population de l’Étude</a></li>
<li class="chapter" data-level="12.4.13" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#scores-de-propension-1"><i class="fa fa-check"></i><b>12.4.13</b> Scores de Propension</a></li>
<li class="chapter" data-level="12.4.14" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#modèles-de-résultats"><i class="fa fa-check"></i><b>12.4.14</b> Modèles de Résultats</a></li>
<li class="chapter" data-level="12.4.15" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#MultipleAnalyses"><i class="fa fa-check"></i><b>12.4.15</b> Exécuter des Analyses Multiples</a></li>
<li class="chapter" data-level="12.4.16" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#scores-de-propension-et-modèle"><i class="fa fa-check"></i><b>12.4.16</b> Scores de Propension et Modèle</a></li>
<li class="chapter" data-level="12.4.17" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#équilibre-des-covariables"><i class="fa fa-check"></i><b>12.4.17</b> Équilibre des Covariables</a></li>
<li class="chapter" data-level="12.4.18" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#suivi-et-puissance"><i class="fa fa-check"></i><b>12.4.18</b> Suivi et Puissance</a></li>
<li class="chapter" data-level="12.4.19" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#kaplan-meier"><i class="fa fa-check"></i><b>12.4.19</b> Kaplan-Meier</a></li>
<li class="chapter" data-level="12.4.20" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#estimation-de-la-taille-de-leffet"><i class="fa fa-check"></i><b>12.4.20</b> Estimation de la Taille de l’Effet</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#résumé-10"><i class="fa fa-check"></i><b>12.5</b> Résumé</a></li>
<li class="chapter" data-level="12.6" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#exercices-7"><i class="fa fa-check"></i><b>12.6</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html"><i class="fa fa-check"></i><b>13</b> Prédiction au Niveau du Patient</a>
<ul>
<li class="chapter" data-level="13.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#le-problème-de-prédiction"><i class="fa fa-check"></i><b>13.1</b> Le Problème de Prédiction</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#exemple-dextraction-de-données"><i class="fa fa-check"></i><b>13.1.1</b> Exemple d’extraction de données</a></li>
<li class="chapter" data-level="13.1.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#négatif-vs-manquant"><i class="fa fa-check"></i><b>13.1.2</b> Négatif vs Manquant</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#modelFitting"><i class="fa fa-check"></i><b>13.2</b> Ajuster le modèle</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#régression-logistique-régularisée"><i class="fa fa-check"></i><b>13.2.1</b> Régression Logistique Régularisée</a></li>
<li class="chapter" data-level="13.2.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#machines-à-gradient-boosting"><i class="fa fa-check"></i><b>13.2.2</b> Machines à Gradient Boosting</a></li>
<li class="chapter" data-level="13.2.3" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#forêt-aléatoire"><i class="fa fa-check"></i><b>13.2.3</b> Forêt Aléatoire</a></li>
<li class="chapter" data-level="13.2.4" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#k-nearest-neighbors"><i class="fa fa-check"></i><b>13.2.4</b> K-Nearest Neighbors</a></li>
<li class="chapter" data-level="13.2.5" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#naive-bayes"><i class="fa fa-check"></i><b>13.2.5</b> Naive Bayes</a></li>
<li class="chapter" data-level="13.2.6" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#adaboost"><i class="fa fa-check"></i><b>13.2.6</b> AdaBoost</a></li>
<li class="chapter" data-level="13.2.7" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#arbre-de-décision"><i class="fa fa-check"></i><b>13.2.7</b> Arbre de Décision</a></li>
<li class="chapter" data-level="13.2.8" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#perceptron-multi-couches"><i class="fa fa-check"></i><b>13.2.8</b> Perceptron Multi-couches</a></li>
<li class="chapter" data-level="13.2.9" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#apprentissage-profond"><i class="fa fa-check"></i><b>13.2.9</b> Apprentissage profond</a></li>
<li class="chapter" data-level="13.2.10" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#autres-algorithmes"><i class="fa fa-check"></i><b>13.2.10</b> Autres Algorithmes</a></li>
<li class="chapter" data-level="13.2.11" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#types-dévaluation"><i class="fa fa-check"></i><b>13.2.11</b> Types d’Évaluation</a></li>
<li class="chapter" data-level="13.2.12" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#performance"><i class="fa fa-check"></i><b>13.2.12</b> Mesures de Performance</a></li>
<li class="chapter" data-level="13.2.13" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#définition-du-problème-3"><i class="fa fa-check"></i><b>13.2.13</b> Définition du problème</a></li>
<li class="chapter" data-level="13.2.14" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#définition-de-la-population-de-létude"><i class="fa fa-check"></i><b>13.2.14</b> Définition de la population de l’étude</a></li>
<li class="chapter" data-level="13.2.15" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#paramètres-de-développement-du-modèle"><i class="fa fa-check"></i><b>13.2.15</b> Paramètres de développement du modèle</a></li>
<li class="chapter" data-level="13.2.16" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#évaluation-du-modèle"><i class="fa fa-check"></i><b>13.2.16</b> Évaluation du modèle</a></li>
<li class="chapter" data-level="13.2.17" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#résumé-de-létude-1"><i class="fa fa-check"></i><b>13.2.17</b> Résumé de l’étude</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#mise-en-œuvre-de-létude-dans-atlas"><i class="fa fa-check"></i><b>13.3</b> Mise en œuvre de l’étude dans ATLAS</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#paramètres-du-problème-de-prédiction"><i class="fa fa-check"></i><b>13.3.1</b> Paramètres du problème de prédiction</a></li>
<li class="chapter" data-level="13.3.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#paramètres-danalyse"><i class="fa fa-check"></i><b>13.3.2</b> Paramètres d’analyse</a></li>
<li class="chapter" data-level="13.3.3" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#instanciation-de-la-cohorte-1"><i class="fa fa-check"></i><b>13.3.3</b> Instanciation de la Cohorte</a></li>
<li class="chapter" data-level="13.3.4" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#extraction-de-données"><i class="fa fa-check"></i><b>13.3.4</b> Extraction de Données</a></li>
<li class="chapter" data-level="13.3.5" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#critères-dinclusion-supplémentaires"><i class="fa fa-check"></i><b>13.3.5</b> Critères d’Inclusion Supplémentaires</a></li>
<li class="chapter" data-level="13.3.6" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#développement-du-modèle"><i class="fa fa-check"></i><b>13.3.6</b> Développement du Modèle</a></li>
<li class="chapter" data-level="13.3.7" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#validation-interne"><i class="fa fa-check"></i><b>13.3.7</b> Validation Interne</a></li>
<li class="chapter" data-level="13.3.8" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#validation-externe"><i class="fa fa-check"></i><b>13.3.8</b> Validation Externe</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#diffusion-des-résultats"><i class="fa fa-check"></i><b>13.4</b> Diffusion des Résultats</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#performance-du-modèle"><i class="fa fa-check"></i><b>13.4.1</b> Performance du Modèle</a></li>
<li class="chapter" data-level="13.4.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#comparaison-des-modèles"><i class="fa fa-check"></i><b>13.4.2</b> Comparaison des Modèles</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#fonctionnalités-additionnelles-de-prédiction-au-niveau-du-patient"><i class="fa fa-check"></i><b>13.5</b> Fonctionnalités Additionnelles de Prédiction au Niveau du Patient</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#génération-darticle-de-journal"><i class="fa fa-check"></i><b>13.5.1</b> Génération d’Article de Journal</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#résumé-11"><i class="fa fa-check"></i><b>13.6</b> Résumé</a></li>
<li class="chapter" data-level="13.7" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#exercices-8"><i class="fa fa-check"></i><b>13.7</b> Exercices</a></li>
</ul></li>
<li class="part"><span><b>IV Qualité des preuves</b></span></li>
<li class="chapter" data-level="14" data-path="EvidenceQuality.html"><a href="EvidenceQuality.html"><i class="fa fa-check"></i><b>14</b> Qualité des preuves</a>
<ul>
<li class="chapter" data-level="14.1" data-path="EvidenceQuality.html"><a href="EvidenceQuality.html#attributs-des-preuves-fiables"><i class="fa fa-check"></i><b>14.1</b> Attributs des preuves fiables</a></li>
<li class="chapter" data-level="14.2" data-path="EvidenceQuality.html"><a href="EvidenceQuality.html#comprendre-la-qualité-des-preuves"><i class="fa fa-check"></i><b>14.2</b> Comprendre la qualité des preuves</a></li>
<li class="chapter" data-level="14.3" data-path="EvidenceQuality.html"><a href="EvidenceQuality.html#communiquer-la-qualité-des-preuves"><i class="fa fa-check"></i><b>14.3</b> Communiquer la qualité des preuves</a></li>
<li class="chapter" data-level="14.4" data-path="EvidenceQuality.html"><a href="EvidenceQuality.html#résumé-12"><i class="fa fa-check"></i><b>14.4</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="DataQuality.html"><a href="DataQuality.html"><i class="fa fa-check"></i><b>15</b> Qualité des données</a>
<ul>
<li class="chapter" data-level="15.1" data-path="DataQuality.html"><a href="DataQuality.html#sources-de-problèmes-de-qualité-des-données"><i class="fa fa-check"></i><b>15.1</b> Sources de problèmes de qualité des données</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="DataQuality.html"><a href="DataQuality.html#vérifications-de-la-qualité-des-données"><i class="fa fa-check"></i><b>15.1.1</b> Vérifications de la qualité des données</a></li>
<li class="chapter" data-level="15.1.2" data-path="DataQuality.html"><a href="DataQuality.html#etlUnitTests"><i class="fa fa-check"></i><b>15.1.2</b> Tests unitaires ETL</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="DataQuality.html"><a href="DataQuality.html#vérifications-spécifiques-à-létude"><i class="fa fa-check"></i><b>15.2</b> Vérifications Spécifiques à l’Étude</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="DataQuality.html"><a href="DataQuality.html#vérification-des-mappings"><i class="fa fa-check"></i><b>15.2.1</b> Vérification des Mappings</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="DataQuality.html"><a href="DataQuality.html#achillesInPractice"><i class="fa fa-check"></i><b>15.3</b> ACHILLES en Pratique</a></li>
<li class="chapter" data-level="15.4" data-path="DataQuality.html"><a href="DataQuality.html#dqdInPractice"><i class="fa fa-check"></i><b>15.4</b> Tableau de Bord de Qualité des Données en Pratique</a></li>
<li class="chapter" data-level="15.5" data-path="DataQuality.html"><a href="DataQuality.html#vérifications-spécifiques-à-létude-en-pratique"><i class="fa fa-check"></i><b>15.5</b> Vérifications Spécifiques à l’Étude en Pratique</a></li>
<li class="chapter" data-level="15.6" data-path="DataQuality.html"><a href="DataQuality.html#résumé-13"><i class="fa fa-check"></i><b>15.6</b> Résumé</a></li>
<li class="chapter" data-level="15.7" data-path="DataQuality.html"><a href="DataQuality.html#exercices-9"><i class="fa fa-check"></i><b>15.7</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="ClinicalValidity.html"><a href="ClinicalValidity.html"><i class="fa fa-check"></i><b>16</b> Validité Clinique</a>
<ul>
<li class="chapter" data-level="16.1" data-path="ClinicalValidity.html"><a href="ClinicalValidity.html#CharacteristicsOfDatabase"><i class="fa fa-check"></i><b>16.1</b> Caractéristiques des Bases de Données de Soins de Santé</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="ClinicalValidity.html"><a href="ClinicalValidity.html#métriques-dévaluation-des-cohortes"><i class="fa fa-check"></i><b>16.1.1</b> Métriques d’évaluation des cohortes</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="ClinicalValidity.html"><a href="ClinicalValidity.html#vérification-des-dossiers-sources"><i class="fa fa-check"></i><b>16.2</b> Vérification des dossiers sources</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="ClinicalValidity.html"><a href="ClinicalValidity.html#exemple-de-vérification-des-dossiers-sources"><i class="fa fa-check"></i><b>16.2.1</b> Exemple de vérification des dossiers sources</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="ClinicalValidity.html"><a href="ClinicalValidity.html#phevaluator"><i class="fa fa-check"></i><b>16.3</b> PheValuator</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="ClinicalValidity.html"><a href="ClinicalValidity.html#validation-dexemple-avec-phevaluator"><i class="fa fa-check"></i><b>16.3.1</b> Validation d’Exemple avec PheValuator</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="ClinicalValidity.html"><a href="ClinicalValidity.html#résumé-14"><i class="fa fa-check"></i><b>16.4</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html"><i class="fa fa-check"></i><b>17</b> Validité du logiciel</a>
<ul>
<li class="chapter" data-level="17.1" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#validité-du-code-détude"><i class="fa fa-check"></i><b>17.1</b> Validité du code d’étude</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#automation"><i class="fa fa-check"></i><b>17.1.1</b> L’automatisation comme exigence pour la reproductibilité</a></li>
<li class="chapter" data-level="17.1.2" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#meilleures-pratiques-de-programmation"><i class="fa fa-check"></i><b>17.1.2</b> Meilleures pratiques de programmation</a></li>
<li class="chapter" data-level="17.1.3" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#validation-du-code"><i class="fa fa-check"></i><b>17.1.3</b> Validation du code</a></li>
<li class="chapter" data-level="17.1.4" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#utilisation-de-la-methods-library"><i class="fa fa-check"></i><b>17.1.4</b> Utilisation de la Methods Library</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#processus-de-développement-de-logiciels-de-la-bibliothèque-de-méthodes"><i class="fa fa-check"></i><b>17.2</b> Processus de Développement de Logiciels de la Bibliothèque de Méthodes</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#gestion-du-code-source"><i class="fa fa-check"></i><b>17.2.1</b> Gestion du Code Source</a></li>
<li class="chapter" data-level="17.2.2" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#documentation-2"><i class="fa fa-check"></i><b>17.2.2</b> Documentation</a></li>
<li class="chapter" data-level="17.2.3" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#disponibilité-des-versions-actuelles-et-historiques"><i class="fa fa-check"></i><b>17.2.3</b> Disponibilité des Versions Actuelles et Historiques</a></li>
<li class="chapter" data-level="17.2.4" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#maintenance-support-et-retraite"><i class="fa fa-check"></i><b>17.2.4</b> Maintenance, Support et Retraite</a></li>
<li class="chapter" data-level="17.2.5" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#personnel-qualifié"><i class="fa fa-check"></i><b>17.2.5</b> Personnel Qualifié</a></li>
<li class="chapter" data-level="17.2.6" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#sécurité-physique-et-logique"><i class="fa fa-check"></i><b>17.2.6</b> Sécurité Physique et Logique</a></li>
<li class="chapter" data-level="17.2.7" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#reprise-après-sinistre"><i class="fa fa-check"></i><b>17.2.7</b> Reprise Après Sinistre</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#tests-de-la-bibliothèque-de-méthodes"><i class="fa fa-check"></i><b>17.3</b> Tests de la Bibliothèque de Méthodes</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#test-unitaire"><i class="fa fa-check"></i><b>17.3.1</b> Test Unitaire</a></li>
<li class="chapter" data-level="17.3.2" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#simulation"><i class="fa fa-check"></i><b>17.3.2</b> Simulation</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#résumé-15"><i class="fa fa-check"></i><b>17.4</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="MethodValidity.html"><a href="MethodValidity.html"><i class="fa fa-check"></i><b>18</b> Validité de la Méthode</a>
<ul>
<li class="chapter" data-level="18.1" data-path="MethodValidity.html"><a href="MethodValidity.html#diagnostics-spécifiques-au-plan-détude"><i class="fa fa-check"></i><b>18.1</b> Diagnostics Spécifiques au Plan d’Étude</a></li>
<li class="chapter" data-level="18.2" data-path="MethodValidity.html"><a href="MethodValidity.html#diagnostics-for-all-estimation"><i class="fa fa-check"></i><b>18.2</b> Diagnostics for All Estimation</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="MethodValidity.html"><a href="MethodValidity.html#NegativeControls"><i class="fa fa-check"></i><b>18.2.1</b> Contrôles Négatifs</a></li>
<li class="chapter" data-level="18.2.2" data-path="MethodValidity.html"><a href="MethodValidity.html#PositiveControls"><i class="fa fa-check"></i><b>18.2.2</b> Contrôles Positifs</a></li>
<li class="chapter" data-level="18.2.3" data-path="MethodValidity.html"><a href="MethodValidity.html#metrics"><i class="fa fa-check"></i><b>18.2.3</b> Évaluation Empirique</a></li>
<li class="chapter" data-level="18.2.4" data-path="MethodValidity.html"><a href="MethodValidity.html#calibration-des-valeurs-de-p"><i class="fa fa-check"></i><b>18.2.4</b> Calibration des valeurs de p</a></li>
<li class="chapter" data-level="18.2.5" data-path="MethodValidity.html"><a href="MethodValidity.html#ConfidenceIntervalCalibration"><i class="fa fa-check"></i><b>18.2.5</b> Calibration des Intervalles de Confiance</a></li>
<li class="chapter" data-level="18.2.6" data-path="MethodValidity.html"><a href="MethodValidity.html#sélection-des-contrôles-négatifs"><i class="fa fa-check"></i><b>18.2.6</b> Sélection des contrôles négatifs</a></li>
<li class="chapter" data-level="18.2.7" data-path="MethodValidity.html"><a href="MethodValidity.html#inclusion-des-contrôles"><i class="fa fa-check"></i><b>18.2.7</b> Inclusion des contrôles</a></li>
<li class="chapter" data-level="18.2.8" data-path="MethodValidity.html"><a href="MethodValidity.html#performance-empirique"><i class="fa fa-check"></i><b>18.2.8</b> Performance empirique</a></li>
<li class="chapter" data-level="18.2.9" data-path="MethodValidity.html"><a href="MethodValidity.html#calibration-de-la-valeur-p"><i class="fa fa-check"></i><b>18.2.9</b> Calibration de la valeur P</a></li>
<li class="chapter" data-level="18.2.10" data-path="MethodValidity.html"><a href="MethodValidity.html#calibration-des-intervalles-de-confiance"><i class="fa fa-check"></i><b>18.2.10</b> Calibration des intervalles de confiance</a></li>
<li class="chapter" data-level="18.2.11" data-path="MethodValidity.html"><a href="MethodValidity.html#hétérogénéité-entre-les-bases-de-données"><i class="fa fa-check"></i><b>18.2.11</b> Hétérogénéité entre les bases de données</a></li>
<li class="chapter" data-level="18.2.12" data-path="MethodValidity.html"><a href="MethodValidity.html#analyses-de-sensibilité"><i class="fa fa-check"></i><b>18.2.12</b> Analyses de sensibilité</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="MethodValidity.html"><a href="MethodValidity.html#résumé-16"><i class="fa fa-check"></i><b>18.3</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="partie-études-ohdsi.html"><a href="partie-études-ohdsi.html"><i class="fa fa-check"></i>(PARTIE) Études OHDSI</a></li>
<li class="chapter" data-level="19" data-path="StudySteps.html"><a href="StudySteps.html"><i class="fa fa-check"></i><b>19</b> Étapes de l’étude</a>
<ul>
<li class="chapter" data-level="19.0.1" data-path="StudySteps.html"><a href="StudySteps.html#définition-de-létude-observatoire"><i class="fa fa-check"></i><b>19.0.1</b> Définition de l’Étude Observatoire</a></li>
<li class="chapter" data-level="19.0.2" data-path="StudySteps.html"><a href="StudySteps.html#pré-spécification-de-la-conception-de-létude"><i class="fa fa-check"></i><b>19.0.2</b> Pré-Spécification de la Conception de l’Étude</a></li>
<li class="chapter" data-level="19.0.3" data-path="StudySteps.html"><a href="StudySteps.html#protocole"><i class="fa fa-check"></i><b>19.0.3</b> Protocole</a></li>
<li class="chapter" data-level="19.0.4" data-path="StudySteps.html"><a href="StudySteps.html#analyses-standardisées"><i class="fa fa-check"></i><b>19.0.4</b> Analyses Standardisées</a></li>
<li class="chapter" data-level="19.0.5" data-path="StudySteps.html"><a href="StudySteps.html#paquets-détudes"><i class="fa fa-check"></i><b>19.0.5</b> Paquets d’Études</a></li>
<li class="chapter" data-level="19.0.6" data-path="StudySteps.html"><a href="StudySteps.html#les-données-sous-jacentes-au-cdm"><i class="fa fa-check"></i><b>19.0.6</b> Les Données Sous-Jacentes au CDM</a></li>
<li class="chapter" data-level="19.1" data-path="StudySteps.html"><a href="StudySteps.html#étapes-de-létude-en-détail"><i class="fa fa-check"></i><b>19.1</b> Étapes de l’Étude en Détail</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="StudySteps.html"><a href="StudySteps.html#définir-la-question"><i class="fa fa-check"></i><b>19.1.1</b> Définir la Question</a></li>
<li class="chapter" data-level="19.1.2" data-path="StudySteps.html"><a href="StudySteps.html#examiner-la-disponibilité-et-la-qualité-des-données"><i class="fa fa-check"></i><b>19.1.2</b> Examiner la Disponibilité et la Qualité des Données</a></li>
<li class="chapter" data-level="19.1.3" data-path="StudySteps.html"><a href="StudySteps.html#populations-détude"><i class="fa fa-check"></i><b>19.1.3</b> Populations d’Étude</a></li>
<li class="chapter" data-level="19.1.4" data-path="StudySteps.html"><a href="StudySteps.html#Feasibility"><i class="fa fa-check"></i><b>19.1.4</b> Faisabilité et Diagnostics</a></li>
<li class="chapter" data-level="19.1.5" data-path="StudySteps.html"><a href="StudySteps.html#finaliser-le-protocole-et-le-paquet-détude"><i class="fa fa-check"></i><b>19.1.5</b> Finaliser le Protocole et le Paquet d’Étude</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="NetworkResearch.html"><a href="NetworkResearch.html"><i class="fa fa-check"></i><b>20</b> OHDSI Network Research</a>
<ul>
<li class="chapter" data-level="20.1" data-path="NetworkResearch.html"><a href="NetworkResearch.html#ohdsi-en-tant-que-réseau-de-recherche"><i class="fa fa-check"></i><b>20.1</b> OHDSI en tant que Réseau de Recherche</a></li>
<li class="chapter" data-level="20.2" data-path="NetworkResearch.html"><a href="NetworkResearch.html#études-en-réseau-ohdsi"><i class="fa fa-check"></i><b>20.2</b> Études en réseau OHDSI</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="NetworkResearch.html"><a href="NetworkResearch.html#motivations-pour-mener-une-étude-en-réseau-ohdsi"><i class="fa fa-check"></i><b>20.2.1</b> Motivations pour mener une étude en réseau OHDSI</a></li>
<li class="chapter" data-level="20.2.2" data-path="NetworkResearch.html"><a href="NetworkResearch.html#définition-dune-étude-en-réseau-ohdsi"><i class="fa fa-check"></i><b>20.2.2</b> Définition d’une étude en réseau OHDSI</a></li>
<li class="chapter" data-level="20.2.3" data-path="NetworkResearch.html"><a href="NetworkResearch.html#considérations-de-conception-pour-une-étude-en-réseau-ohdsi"><i class="fa fa-check"></i><b>20.2.3</b> Considérations de conception pour une étude en réseau OHDSI</a></li>
<li class="chapter" data-level="20.2.4" data-path="NetworkResearch.html"><a href="NetworkResearch.html#considérations-logistiques-pour-une-étude-en-réseau-ohdsi"><i class="fa fa-check"></i><b>20.2.4</b> Considérations logistiques pour une étude en réseau OHDSI</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="NetworkResearch.html"><a href="NetworkResearch.html#exécution-dune-étude-en-réseau-ohdsi"><i class="fa fa-check"></i><b>20.3</b> Exécution d’une étude en réseau OHDSI</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="NetworkResearch.html"><a href="NetworkResearch.html#conception-et-faisabilité-de-létude"><i class="fa fa-check"></i><b>20.3.1</b> Conception et faisabilité de l’étude</a></li>
<li class="chapter" data-level="20.3.2" data-path="NetworkResearch.html"><a href="NetworkResearch.html#exécution-de-létude"><i class="fa fa-check"></i><b>20.3.2</b> Exécution de l’étude</a></li>
<li class="chapter" data-level="20.3.3" data-path="NetworkResearch.html"><a href="NetworkResearch.html#diffusion-et-publication-des-résultats"><i class="fa fa-check"></i><b>20.3.3</b> Diffusion et publication des résultats</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="NetworkResearch.html"><a href="NetworkResearch.html#meilleures-pratiques-pour-les-études-en-réseau-ohdsi"><i class="fa fa-check"></i><b>20.4</b> Meilleures pratiques pour les études en réseau OHDSI</a></li>
<li class="chapter" data-level="20.5" data-path="NetworkResearch.html"><a href="NetworkResearch.html#résumé-17"><i class="fa fa-check"></i><b>20.5</b> Résumé</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="Glossary.html"><a href="Glossary.html"><i class="fa fa-check"></i><b>21</b> Glossaire</a>
<ul>
<li class="chapter" data-level="21.0.1" data-path="Glossary.html"><a href="Glossary.html#détection-des-valeurs-manquantes"><i class="fa fa-check"></i><b>21.0.1</b> Détection des valeurs manquantes</a></li>
<li class="chapter" data-level="21.0.2" data-path="Glossary.html"><a href="Glossary.html#gestion-des-valeurs-manquantes"><i class="fa fa-check"></i><b>21.0.2</b> Gestion des valeurs manquantes</a></li>
<li class="chapter" data-level="21.0.3" data-path="Glossary.html"><a href="Glossary.html#cas-pratique"><i class="fa fa-check"></i><b>21.0.3</b> Cas pratique</a></li>
<li class="chapter" data-level="21.0.4" data-path="Glossary.html"><a href="Glossary.html#conclusion"><i class="fa fa-check"></i><b>21.0.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html"><i class="fa fa-check"></i><b>22</b> Définitions de cohortes</a>
<ul>
<li class="chapter" data-level="22.1" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#AceInhibitors"><i class="fa fa-check"></i><b>22.1</b> Inhibiteurs de l’ECA</a></li>
<li class="chapter" data-level="22.2" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#AceInhibitorsMono"><i class="fa fa-check"></i><b>22.2</b> Nouveaux utilisateurs de monothérapie avec des inhibiteurs de l’ECA</a></li>
<li class="chapter" data-level="22.3" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#Ami"><i class="fa fa-check"></i><b>22.3</b> Infarctus du myocarde aigu (IMA)</a></li>
<li class="chapter" data-level="22.4" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#Angioedema"><i class="fa fa-check"></i><b>22.4</b> Angioedème</a></li>
<li class="chapter" data-level="22.5" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#ThiazidesMono"><i class="fa fa-check"></i><b>22.5</b> Nouveaux Utilisateurs de Diurétiques de Type Thiazidique en Monothérapie</a></li>
<li class="chapter" data-level="22.6" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#HTN1yrFO"><i class="fa fa-check"></i><b>22.6</b> Patients Initiating First-Line Therapy for Hypertension</a></li>
<li class="chapter" data-level="22.7" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#HTN3yrFO"><i class="fa fa-check"></i><b>22.7</b> Patients Initiating First-Line Therapy for Hypertension With &gt;3 Yr Follow-Up</a></li>
<li class="chapter" data-level="22.8" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#ACEiUse"><i class="fa fa-check"></i><b>22.8</b> ACE Inhibitor Use</a></li>
<li class="chapter" data-level="22.9" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#ARBUse"><i class="fa fa-check"></i><b>22.9</b> Angiotensin Receptor Blocker (ARB) Use</a></li>
<li class="chapter" data-level="22.10" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#THZUse"><i class="fa fa-check"></i><b>22.10</b> Thiazide Or Thiazide-Like Diuretic Use</a></li>
<li class="chapter" data-level="22.11" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#dCCBUse"><i class="fa fa-check"></i><b>22.11</b> Dihydropyridine Calcium Channel Blocker (dCCB) Use</a></li>
<li class="chapter" data-level="22.12" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#BBUse"><i class="fa fa-check"></i><b>22.12</b> Utilisation des Bêta-bloquants</a></li>
<li class="chapter" data-level="22.13" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#DLoopUse"><i class="fa fa-check"></i><b>22.13</b> Utilisation des Diurétiques - Anse</a></li>
<li class="chapter" data-level="22.14" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#DPUse"><i class="fa fa-check"></i><b>22.14</b> Utilisation des Diurétiques - Épargneurs de potassium</a></li>
<li class="chapter" data-level="22.15" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#A1BUse"><i class="fa fa-check"></i><b>22.15</b> Utilisation des Bloqueurs Alpha-1</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="NegativeControlsAppendix.html"><a href="NegativeControlsAppendix.html"><i class="fa fa-check"></i><b>23</b> Contrôles négatifs</a>
<ul>
<li class="chapter" data-level="23.1" data-path="NegativeControlsAppendix.html"><a href="NegativeControlsAppendix.html#AceiThzNsc"><i class="fa fa-check"></i><b>23.1</b> ACEi et THZ</a></li>
<li class="chapter" data-level="23.2" data-path="NegativeControlsAppendix.html"><a href="NegativeControlsAppendix.html#ProtocolTemplate"><i class="fa fa-check"></i><b>23.2</b> # Modèle de protocole</a></li>
<li class="chapter" data-level="23.3" data-path="NegativeControlsAppendix.html"><a href="NegativeControlsAppendix.html#na"><i class="fa fa-check"></i><b>23.3</b> NA</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html"><i class="fa fa-check"></i><b>24</b> Réponses suggérées</a>
<ul>
<li class="chapter" data-level="24.1" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#Cdmanswers"><i class="fa fa-check"></i><b>24.1</b> Le modèle de données commun</a></li>
<li class="chapter" data-level="24.2" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#Vocabanswers"><i class="fa fa-check"></i><b>24.2</b> Vocabulaires standardisés</a></li>
<li class="chapter" data-level="24.3" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#Etlanswers"><i class="fa fa-check"></i><b>24.3</b> Extraction, transformation et chargement</a></li>
<li class="chapter" data-level="24.4" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#UseCasesanswers"><i class="fa fa-check"></i><b>24.4</b> Cas d’utilisation des analyses de données</a></li>
<li class="chapter" data-level="24.5" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#Cohortsanswers"><i class="fa fa-check"></i><b>24.5</b> Définir des Cohortes</a></li>
<li class="chapter" data-level="24.6" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#Characterizationanswers"><i class="fa fa-check"></i><b>24.6</b> Caractérisation</a></li>
<li class="chapter" data-level="24.7" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#Pleanswers"><i class="fa fa-check"></i><b>24.7</b> Estimation Au Niveau De La Population</a></li>
<li class="chapter" data-level="24.8" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#Plpanswers"><i class="fa fa-check"></i><b>24.8</b> Prédiction Au Niveau Des Patients</a></li>
<li class="chapter" data-level="24.9" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#DataQualityanswers"><i class="fa fa-check"></i><b>24.9</b> Qualité des données</a></li>
<li class="chapter" data-level="24.10" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#section"><i class="fa fa-check"></i><b>24.10</b> </a></li>
</ul></li>
<li class="chapter" data-level="" data-path="références.html"><a href="références.html"><i class="fa fa-check"></i>Références</a>
<ul>
<li class="chapter" data-level="24.11" data-path="références.html"><a href="références.html#non-disponible"><i class="fa fa-check"></i><b>24.11</b> Non disponible</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Le Livre d’OHDSI</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="SqlAndR" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">Chapitre 9</span> SQL et R<a href="SqlAndR.html#SqlAndR" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><em>Responsables de chapitre : Martijn Schuemie &amp; Peter Rijnbeek</em></p>
<p>Le Common Data Model (CDM) est un modèle de base de données relationnelle (toutes les données sont représentées sous forme d’enregistrements dans des tables qui ont des champs), ce qui signifie que les données seront normalement stockées dans une base de données relationnelle utilisant une plateforme logicielle comme PostgreSQL, Oracle ou Microsoft SQL Server. Les divers outils OHDSI tels que ATLAS et la Methods Library fonctionnent en interrogeant la base de données en coulisse, mais nous pouvons également interroger directement la base de données nous-mêmes si nous disposons des droits d’accès appropriés. La principale raison de le faire est d’effectuer des analyses qui ne sont actuellement pas supportées par des outils existants. Cependant, interroger directement la base de données comporte également un risque accru de faire des erreurs, car les outils OHDSI sont souvent conçus pour aider à guider l’utilisateur vers une analyse appropriée des données. Les requêtes directes ne fournissent pas une telle guidance.</p>
<p>Le langage standard pour interroger les bases de données relationnelles est le SQL (Structured Query Language), qui peut être utilisé à la fois pour interroger la base de données ainsi que pour apporter des modifications aux données. Bien que les commandes de base en SQL soient en effet standard, c’est-à-dire les mêmes sur toutes les plateformes logicielles, chaque plateforme a son propre dialecte, avec des différences subtiles. Par exemple, pour récupérer les 10 premières lignes de la table PERSON sur SQL Server, on écrirait : </p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb8-1"><a href="SqlAndR.html#cb8-1" tabindex="-1"></a><span class="kw">SELECT</span> TOP <span class="dv">10</span> <span class="op">*</span> <span class="kw">FROM</span> person;</span></code></pre></div>
<p>Tandis que la même requête sur PostgreSQL serait :</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb9-1"><a href="SqlAndR.html#cb9-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> person <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<p>Dans OHDSI, nous aimerions être agnostiques vis-à-vis du dialecte spécifique qu’une plateforme utilise ; nous aimerions ‘parler’ le même langage SQL sur toutes les bases de données OHDSI. Pour cette raison, OHDSI a développé le package <a href="https://ohdsi.github.io/SqlRender/">SqlRender</a>, un package R qui peut traduire d’un dialecte standard vers n’importe lequel des dialectes supportés qui seront discutés plus tard dans ce chapitre. Ce dialecte standard - <strong>OHDSI SQL</strong> - est principalement un sous-ensemble du dialecte SQL Server SQL. Les exemples de déclarations SQL fournis tout au long de ce chapitre utiliseront tous l’OHDSI SQL. </p>
<p>Chaque plateforme de base de données dispose également de ses propres outils logiciels pour interroger la base de données en utilisant SQL. Dans OHDSI, nous avons développé le package <a href="https://ohdsi.github.io/DatabaseConnector/">DatabaseConnector</a>, un package R qui peut se connecter à de nombreuses plateformes de base de données. DatabaseConnector sera également discuté plus tard dans ce chapitre. </p>
<p>Ainsi, bien que l’on puisse interroger une base de données conforme au CDM sans utiliser d’outils OHDSI, le chemin recommandé est d’utiliser les packages DatabaseConnector et SqlRender. Cela permet aux requêtes développées sur un site d’être utilisées sur n’importe quel autre site sans modification. R lui-même offre également immédiatement des fonctionnalités pour analyser davantage les données extraites de la base de données, telles que la réalisation d’analyses statistiques et la génération de graphiques (interactifs). </p>
<p>Dans ce chapitre, nous supposons que le lecteur a une compréhension de base de SQL. Nous passons d’abord en revue comment utiliser SqlRender et DatabaseConnector. Si le lecteur n’a pas l’intention d’utiliser ces packages, ces sections peuvent être omises. Dans la Section <a href="SqlAndR.html#QueryTheCdm">9.3</a>, nous discutons de la manière d’utiliser SQL (dans ce cas OHDSI SQL) pour interroger le CDM. La section suivante met en lumière comment utiliser le Vocabulaire Standardisé OHDSI lors de l’interrogation du CDM. Nous mettons en avant la QueryLibrary, une collection de requêtes couramment utilisées contre le CDM qui est publiquement disponible. Nous clôturons ce chapitre avec une étude exemple estimant les taux d’incidence, et implémentons cette étude en utilisant SqlRender et DatabaseConnector. </p>
<div id="SqlRender" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> SqlRender<a href="SqlAndR.html#SqlRender" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Le package <a href="https://ohdsi.github.io/SqlRender/">SqlRender</a> est disponible sur CRAN (le Comprehensive R Archive Network), et peut donc être installé en utilisant :</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="SqlAndR.html#cb10-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;SqlRender&quot;</span>)</span></code></pre></div>
<p>SqlRender prend en charge une large gamme de plateformes techniques, y compris les systèmes de bases de données traditionnels (PostgreSQL, Microsoft SQL Server, SQLite et Oracle), les entrepôts de données parallèles (Microsoft APS, IBM Netezza et Amazon Redshift), ainsi que les plateformes Big Data (Hadoop via Impala et Google BigQuery). Le package R est fourni avec un manuel et une vignette qui explore toutes les fonctionnalités. Ici, nous décrivons certaines des principales fonctionnalités.</p>
<div id="paramétrage-sql" class="section level3 hasAnchor" number="9.1.1">
<h3><span class="header-section-number">9.1.1</span> Paramétrage SQL<a href="SqlAndR.html#paramétrage-sql" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Une des fonctions du package est de prendre en charge la paramétrisation du SQL. Souvent, de petites variations du SQL doivent être générées en fonction de certains paramètres. SqlRender offre une syntaxe de balisage simple dans le code SQL pour permettre la paramétrisation. Le rendu du SQL basé sur les valeurs des paramètres est effectué à l’aide de la fonction <code>render()</code>. </p>
<div id="substitution-des-valeurs-de-paramètres" class="section level4 unnumbered hasAnchor">
<h4>Substitution des Valeurs de Paramètres<a href="SqlAndR.html#substitution-des-valeurs-de-paramètres" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Le caractère <code>@</code> peut être utilisé pour indiquer les noms des paramètres à échanger contre les valeurs réelles des paramètres lors du rendu. Dans l’exemple suivant, une variable appelée <code>a</code> est mentionnée dans le SQL. Dans l’appel à la fonction render, la valeur de ce paramètre est définie :</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="SqlAndR.html#cb11-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * FROM concept WHERE concept_id = @a;&quot;</span></span>
<span id="cb11-2"><a href="SqlAndR.html#cb11-2" tabindex="-1"></a><span class="fu">render</span>(sql, <span class="at">a =</span> <span class="dv">123</span>)</span></code></pre></div>
<pre><code>## [1] &quot;SELECT * FROM concept WHERE concept_id = 123;&quot;</code></pre>
<p>Notez que, contrairement à la paramétrisation offerte par la plupart des systèmes de gestion de bases de données, il est tout aussi facile de paramétrer les noms de tables ou de champs que les valeurs :</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="SqlAndR.html#cb13-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * FROM @x WHERE person_id = @a;&quot;</span></span>
<span id="cb13-2"><a href="SqlAndR.html#cb13-2" tabindex="-1"></a><span class="fu">render</span>(sql, <span class="at">x =</span> <span class="st">&quot;observation&quot;</span>, <span class="at">a =</span> <span class="dv">123</span>)</span></code></pre></div>
<pre><code>## [1] &quot;SELECT * FROM observation WHERE person_id = 123;&quot;</code></pre>
<p>Les valeurs des paramètres peuvent être des nombres, des chaînes, des booléens ainsi que des vecteurs, qui sont convertis en listes séparées par des virgules :</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="SqlAndR.html#cb15-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * FROM concept WHERE concept_id IN (@a);&quot;</span></span>
<span id="cb15-2"><a href="SqlAndR.html#cb15-2" tabindex="-1"></a><span class="fu">render</span>(sql, <span class="at">a =</span> <span class="fu">c</span>(<span class="dv">123</span>, <span class="dv">234</span>, <span class="dv">345</span>))</span></code></pre></div>
<pre><code>## [1] &quot;SELECT * FROM concept WHERE concept_id IN (123,234,345);&quot;</code></pre>
</div>
<div id="if-then-else" class="section level4 unnumbered hasAnchor">
<h4>If-Then-Else<a href="SqlAndR.html#if-then-else" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Parfois, des blocs de codes doivent être activés ou désactivés en fonction des valeurs d’un ou plusieurs paramètres. Cela se fait en utilisant la syntaxe <code>{Condition} ? {if true} : {if false}</code>. Si la <em>condition</em> évalue à true ou 1, le bloc <em>if true</em> est utilisé, sinon le bloc <em>if false</em> est affiché (s’il est présent).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="SqlAndR.html#cb17-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * FROM cohort {@x} ? {WHERE subject_id = 1}&quot;</span></span>
<span id="cb17-2"><a href="SqlAndR.html#cb17-2" tabindex="-1"></a><span class="fu">render</span>(sql, <span class="at">x =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;SELECT * FROM cohort &quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="SqlAndR.html#cb19-1" tabindex="-1"></a><span class="fu">render</span>(sql, <span class="at">x =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;SELECT * FROM cohort WHERE subject_id = 1&quot;</code></pre>
<p>Les comparaisons simples sont également prises en charge :</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="SqlAndR.html#cb21-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * FROM cohort {@x == 1} ? {WHERE subject_id = 1};&quot;</span></span>
<span id="cb21-2"><a href="SqlAndR.html#cb21-2" tabindex="-1"></a><span class="fu">render</span>(sql,<span class="at">x =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;SELECT * FROM cohort WHERE subject_id = 1;&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="SqlAndR.html#cb23-1" tabindex="-1"></a><span class="fu">render</span>(sql,<span class="at">x =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;SELECT * FROM cohort ;&quot;</code></pre>
<p>Ainsi que l’opérateur <code>IN</code> :</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="SqlAndR.html#cb25-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * FROM cohort {@x IN (1,2,3)} ? {WHERE subject_id = 1};&quot;</span></span>
<span id="cb25-2"><a href="SqlAndR.html#cb25-2" tabindex="-1"></a><span class="fu">render</span>(sql,<span class="at">x =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;SELECT * FROM cohort WHERE subject_id = 1;&quot;</code></pre>
</div>
</div>
<div id="traduction-vers-dautres-dialectes-sql" class="section level3 hasAnchor" number="9.1.2">
<h3><span class="header-section-number">9.1.2</span> Traduction vers d’Autres Dialectes SQL<a href="SqlAndR.html#traduction-vers-dautres-dialectes-sql" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Une autre fonction du package <a href="https://ohdsi.github.io/SqlRender/">SqlRender</a> est de traduire du SQL OHDSI vers d’autres dialectes SQL. Par exemple :</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="SqlAndR.html#cb27-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT TOP 10 * FROM person;&quot;</span></span>
<span id="cb27-2"><a href="SqlAndR.html#cb27-2" tabindex="-1"></a><span class="fu">translate</span>(sql, <span class="at">targetDialect =</span> <span class="st">&quot;postgresql&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;SELECT  * FROM person LIMIT 10;&quot;
## attr(,&quot;sqlDialect&quot;)
## [1] &quot;postgresql&quot;</code></pre>
<p>Le paramètre <code>targetDialect</code> peut avoir les valeurs suivantes : “oracle”, “postgresql”, “pdw”, “redshift”, “impala”, “netezza”, “bigquery”, “sqlite” et “sql server”. </p>

<div class="rmdimportant">
<p>Il existe des limites quant à ce que les fonctions et constructions SQL peuvent être traduites correctement, à la fois parce qu’un ensemble limité de règles de traduction ont été implémentées dans le package, mais aussi parce que certaines fonctionnalités SQL n’ont pas d’équivalent dans tous les dialectes. Ceci est la raison principale pour laquelle le SQL OHDSI a été développé en tant que nouveau dialecte SQL à part entière. Cependant, chaque fois que possible, nous avons gardé la syntaxe SQL Server pour éviter de réinventer la roue.</p>
</div>
<p>Malgré nos meilleurs efforts, il y a beaucoup de considérations à prendre en compte lors de l’écriture de SQL OHDSI qui s’exécutera sans erreur sur toutes les plateformes prises en charge. Ce qui suit discute de ces considérations en détail.</p>
<div id="fonctions-et-structures-prises-en-charge-par-translate" class="section level4 unnumbered hasAnchor">
<h4>Fonctions et Structures Prises en Charge par Translate<a href="SqlAndR.html#fonctions-et-structures-prises-en-charge-par-translate" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Ces fonctions SQL Server ont été testées et se sont révélées être correctement traduites dans les différents dialectes : </p>
<p>Table : (#tab:sqlFunctions) Fonctions prises en charge par translate.</p>
<table>
<thead>
<tr class="header">
<th align="left">Fonction</th>
<th align="left">Fonction</th>
<th align="left">Fonction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ABS</td>
<td align="left">EXP</td>
<td align="left">RAND</td>
</tr>
<tr class="even">
<td align="left">ACOS</td>
<td align="left">FLOOR</td>
<td align="left">RANK</td>
</tr>
<tr class="odd">
<td align="left">ASIN</td>
<td align="left">GETDATE</td>
<td align="left">RIGHT</td>
</tr>
<tr class="even">
<td align="left">ATAN</td>
<td align="left">HASHBYTES*</td>
<td align="left">ROUND</td>
</tr>
<tr class="odd">
<td align="left">AVG</td>
<td align="left">ISNULL</td>
<td align="left">ROW_NUMBER</td>
</tr>
<tr class="even">
<td align="left">CAST</td>
<td align="left">ISNUMERIC</td>
<td align="left">RTRIM</td>
</tr>
<tr class="odd">
<td align="left">CEILING</td>
<td align="left">LEFT</td>
<td align="left">SIN</td>
</tr>
<tr class="even">
<td align="left">CHARINDEX</td>
<td align="left">LEN</td>
<td align="left">SQRT</td>
</tr>
<tr class="odd">
<td align="left">CONCAT</td>
<td align="left">LOG</td>
<td align="left">SQUARE</td>
</tr>
<tr class="even">
<td align="left">COS</td>
<td align="left">LOG10</td>
<td align="left">STDEV</td>
</tr>
<tr class="odd">
<td align="left">COUNT</td>
<td align="left">LOWER</td>
<td align="left">SUM</td>
</tr>
<tr class="even">
<td align="left">COUNT_BIG</td>
<td align="left">LTRIM</td>
<td align="left">TAN</td>
</tr>
<tr class="odd">
<td align="left">DATEADD</td>
<td align="left">MAX</td>
<td align="left">UPPER</td>
</tr>
<tr class="even">
<td align="left">DATEDIFF</td>
<td align="left">MIN</td>
<td align="left">VAR</td>
</tr>
<tr class="odd">
<td align="left">DATEFROMPARTS</td>
<td align="left">MONTH</td>
<td align="left">YEAR</td>
</tr>
<tr class="even">
<td align="left">DATETIMEFROMPARTS</td>
<td align="left">NEWID</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">DAY</td>
<td align="left">PI</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">EOMONTH</td>
<td align="left">POWER</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>* Nécessite des privilèges spéciaux sur Oracle. N’a pas d’équivalent sur SQLite.</p>
<p>De même, de nombreuses structures syntaxiques SQL sont prises en charge. Voici une liste non exhaustive d’expressions dont nous savons qu’elles se traduisent bien :</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb29-1"><a href="SqlAndR.html#cb29-1" tabindex="-1"></a><span class="co">-- Sélections simples :</span></span>
<span id="cb29-2"><a href="SqlAndR.html#cb29-2" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> <span class="kw">table</span>;</span>
<span id="cb29-3"><a href="SqlAndR.html#cb29-3" tabindex="-1"></a></span>
<span id="cb29-4"><a href="SqlAndR.html#cb29-4" tabindex="-1"></a><span class="co">-- Sélections avec jointures :</span></span>
<span id="cb29-5"><a href="SqlAndR.html#cb29-5" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> table_1 <span class="kw">INNER</span> <span class="kw">JOIN</span> table_2 <span class="kw">ON</span> a <span class="op">=</span> b;</span>
<span id="cb29-6"><a href="SqlAndR.html#cb29-6" tabindex="-1"></a></span>
<span id="cb29-7"><a href="SqlAndR.html#cb29-7" tabindex="-1"></a><span class="co">-- Requêtes imbriquées :</span></span>
<span id="cb29-8"><a href="SqlAndR.html#cb29-8" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> (<span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> table_1) tmp <span class="kw">WHERE</span> a <span class="op">=</span> b;</span>
<span id="cb29-9"><a href="SqlAndR.html#cb29-9" tabindex="-1"></a></span>
<span id="cb29-10"><a href="SqlAndR.html#cb29-10" tabindex="-1"></a><span class="co">-- Limitation aux lignes du haut :</span></span>
<span id="cb29-11"><a href="SqlAndR.html#cb29-11" tabindex="-1"></a><span class="kw">SELECT</span> TOP <span class="dv">10</span> <span class="op">*</span> <span class="kw">FROM</span> <span class="kw">table</span>;</span>
<span id="cb29-12"><a href="SqlAndR.html#cb29-12" tabindex="-1"></a></span>
<span id="cb29-13"><a href="SqlAndR.html#cb29-13" tabindex="-1"></a><span class="co">-- Sélection dans une nouvelle table :</span></span>
<span id="cb29-14"><a href="SqlAndR.html#cb29-14" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">INTO</span> new_table <span class="kw">FROM</span> <span class="kw">table</span>;</span>
<span id="cb29-15"><a href="SqlAndR.html#cb29-15" tabindex="-1"></a></span>
<span id="cb29-16"><a href="SqlAndR.html#cb29-16" tabindex="-1"></a><span class="co">-- Création de tables :</span></span>
<span id="cb29-17"><a href="SqlAndR.html#cb29-17" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">table</span> (field <span class="dt">INT</span>);</span>
<span id="cb29-18"><a href="SqlAndR.html#cb29-18" tabindex="-1"></a></span>
<span id="cb29-19"><a href="SqlAndR.html#cb29-19" tabindex="-1"></a><span class="co">-- Insertion de valeurs littérales :</span></span>
<span id="cb29-20"><a href="SqlAndR.html#cb29-20" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> other_table (field_1) <span class="kw">VALUES</span> (<span class="dv">1</span>);</span>
<span id="cb29-21"><a href="SqlAndR.html#cb29-21" tabindex="-1"></a></span>
<span id="cb29-22"><a href="SqlAndR.html#cb29-22" tabindex="-1"></a><span class="co">-- Insertion à partir de SELECT :</span></span>
<span id="cb29-23"><a href="SqlAndR.html#cb29-23" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> other_table (field_1) <span class="kw">SELECT</span> <span class="fu">value</span> <span class="kw">FROM</span> <span class="kw">table</span>;</span>
<span id="cb29-24"><a href="SqlAndR.html#cb29-24" tabindex="-1"></a></span>
<span id="cb29-25"><a href="SqlAndR.html#cb29-25" tabindex="-1"></a><span class="co">-- Commandes de suppression simples :</span></span>
<span id="cb29-26"><a href="SqlAndR.html#cb29-26" tabindex="-1"></a><span class="kw">DROP</span> <span class="kw">TABLE</span> <span class="kw">table</span>;</span>
<span id="cb29-27"><a href="SqlAndR.html#cb29-27" tabindex="-1"></a></span>
<span id="cb29-28"><a href="SqlAndR.html#cb29-28" tabindex="-1"></a><span class="co">-- Suppression de table si elle existe :</span></span>
<span id="cb29-29"><a href="SqlAndR.html#cb29-29" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">&#39;ACHILLES_analysis&#39;</span>, <span class="st">&#39;U&#39;</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb29-30"><a href="SqlAndR.html#cb29-30" tabindex="-1"></a>  <span class="kw">DROP</span> <span class="kw">TABLE</span> ACHILLES_analysis;</span>
<span id="cb29-31"><a href="SqlAndR.html#cb29-31" tabindex="-1"></a></span>
<span id="cb29-32"><a href="SqlAndR.html#cb29-32" tabindex="-1"></a><span class="co">-- Suppression de table temporaire si elle existe :</span></span>
<span id="cb29-33"><a href="SqlAndR.html#cb29-33" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">&#39;tempdb..#cohorts&#39;</span>, <span class="st">&#39;U&#39;</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb29-34"><a href="SqlAndR.html#cb29-34" tabindex="-1"></a>  <span class="kw">DROP</span> <span class="kw">TABLE</span> #cohorts;</span>
<span id="cb29-35"><a href="SqlAndR.html#cb29-35" tabindex="-1"></a></span>
<span id="cb29-36"><a href="SqlAndR.html#cb29-36" tabindex="-1"></a><span class="co">-- Expressions de table communes :</span></span>
<span id="cb29-37"><a href="SqlAndR.html#cb29-37" tabindex="-1"></a><span class="kw">WITH</span> cte <span class="kw">AS</span> (<span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> <span class="kw">table</span>) <span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> cte;</span>
<span id="cb29-38"><a href="SqlAndR.html#cb29-38" tabindex="-1"></a></span>
<span id="cb29-39"><a href="SqlAndR.html#cb29-39" tabindex="-1"></a><span class="co">-- Clauses OVER :</span></span>
<span id="cb29-40"><a href="SqlAndR.html#cb29-40" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">ROW_NUMBER</span>() <span class="kw">OVER</span> (<span class="kw">PARTITION</span> <span class="kw">BY</span> a <span class="kw">ORDER</span> <span class="kw">BY</span> b)</span>
<span id="cb29-41"><a href="SqlAndR.html#cb29-41" tabindex="-1"></a>  <span class="kw">AS</span> <span class="ot">&quot;Row Number&quot;</span> <span class="kw">FROM</span> <span class="kw">table</span>;</span>
<span id="cb29-42"><a href="SqlAndR.html#cb29-42" tabindex="-1"></a></span>
<span id="cb29-43"><a href="SqlAndR.html#cb29-43" tabindex="-1"></a><span class="co">-- Clauses CASE WHEN :</span></span>
<span id="cb29-44"><a href="SqlAndR.html#cb29-44" tabindex="-1"></a><span class="kw">SELECT</span> <span class="cf">CASE</span> <span class="cf">WHEN</span> a<span class="op">=</span><span class="dv">1</span> <span class="cf">THEN</span> a <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> <span class="fu">value</span> <span class="kw">FROM</span> <span class="kw">table</span>;</span>
<span id="cb29-45"><a href="SqlAndR.html#cb29-45" tabindex="-1"></a></span>
<span id="cb29-46"><a href="SqlAndR.html#cb29-46" tabindex="-1"></a><span class="co">-- UNIONS :</span></span>
<span id="cb29-47"><a href="SqlAndR.html#cb29-47" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> a <span class="kw">UNION</span> <span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> b;</span>
<span id="cb29-48"><a href="SqlAndR.html#cb29-48" tabindex="-1"></a></span>
<span id="cb29-49"><a href="SqlAndR.html#cb29-49" tabindex="-1"></a><span class="co">-- INTERSECTIONS :</span></span>
<span id="cb29-50"><a href="SqlAndR.html#cb29-50" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> a <span class="kw">INTERSECT</span> <span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> b;</span>
<span id="cb29-51"><a href="SqlAndR.html#cb29-51" tabindex="-1"></a></span>
<span id="cb29-52"><a href="SqlAndR.html#cb29-52" tabindex="-1"></a><span class="co">-- EXCEPT :</span></span>
<span id="cb29-53"><a href="SqlAndR.html#cb29-53" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> a <span class="kw">EXCEPT</span> <span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> b;</span></code></pre></div>
</div>
<div id="concaténation-de-chaînes" class="section level4 unnumbered hasAnchor">
<h4>Concaténation de Chaînes<a href="SqlAndR.html#concaténation-de-chaînes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>La concaténation de chaînes est un domaine où SQL Server est moins spécifique que d’autres dialectes. Dans SQL Server, on écrirait <code>SELECT first_name + ' ' + last_name AS full_name FROM table</code>, mais cela devrait être <code>SELECT first_name || ' ' || last_name AS full_name FROM table</code> dans PostgreSQL et Oracle. SqlRender tente de deviner quand les valeurs concaténées sont des chaînes. Dans l’exemple ci-dessus, parce que nous avons une chaîne explicite (l’espace entouré de guillemets simples), la traduction sera correcte. Cependant, si la requête avait été <code>SELECT first_name + last_name AS full_name FROM table</code>, SqlRender n’aurait pas eu d’indice que les deux champs étaient des chaînes, et laisserait incorrectement le signe plus. Un autre indice qu’une valeur est une chaîne est une conversion explicite en VARCHAR, donc <code>SELECT last_name + CAST(age AS VARCHAR(3)) AS full_name FROM table</code> serait également traduit correctement. Pour éviter toute ambiguïté, il est probablement préférable d’utiliser la fonction <code>CONCAT()</code> pour concaténer deux ou plusieurs chaînes.</p>
</div>
<div id="alias-de-table-et-le-mot-clé-as" class="section level4 unnumbered hasAnchor">
<h4>Alias de Table et le Mot-Clé AS<a href="SqlAndR.html#alias-de-table-et-le-mot-clé-as" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>De nombreux dialectes SQL permettent l’utilisation du mot-clé <code>AS</code> lors de la définition d’un alias de table, mais fonctionneront également bien sans le mot-clé. Par exemple, ces deux instructions SQL sont correctes pour SQL Server, PostgreSQL, Redshift, etc. :</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb30-1"><a href="SqlAndR.html#cb30-1" tabindex="-1"></a><span class="co">-- Utilisation du mot-clé AS</span></span>
<span id="cb30-2"><a href="SqlAndR.html#cb30-2" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb30-3"><a href="SqlAndR.html#cb30-3" tabindex="-1"></a><span class="kw">FROM</span> my_table <span class="kw">AS</span> table_1</span>
<span id="cb30-4"><a href="SqlAndR.html#cb30-4" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> (</span>
<span id="cb30-5"><a href="SqlAndR.html#cb30-5" tabindex="-1"></a>  <span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> other_table</span>
<span id="cb30-6"><a href="SqlAndR.html#cb30-6" tabindex="-1"></a>) <span class="kw">AS</span> table_2</span>
<span id="cb30-7"><a href="SqlAndR.html#cb30-7" tabindex="-1"></a><span class="kw">ON</span> table_1.person_id <span class="op">=</span> table_2.person_id;</span>
<span id="cb30-8"><a href="SqlAndR.html#cb30-8" tabindex="-1"></a></span>
<span id="cb30-9"><a href="SqlAndR.html#cb30-9" tabindex="-1"></a><span class="co">-- Non-utilisation du mot-clé AS</span></span>
<span id="cb30-10"><a href="SqlAndR.html#cb30-10" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb30-11"><a href="SqlAndR.html#cb30-11" tabindex="-1"></a><span class="kw">FROM</span> my_table table_1</span>
<span id="cb30-12"><a href="SqlAndR.html#cb30-12" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> (</span>
<span id="cb30-13"><a href="SqlAndR.html#cb30-13" tabindex="-1"></a>  <span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> other_table</span>
<span id="cb30-14"><a href="SqlAndR.html#cb30-14" tabindex="-1"></a>) table_2</span>
<span id="cb30-15"><a href="SqlAndR.html#cb30-15" tabindex="-1"></a><span class="kw">ON</span> table_1.person_id <span class="op">=</span> table_2.person_id;</span></code></pre></div>
<p>Cependant, Oracle renverra une erreur lorsque le mot-clé <code>AS</code> est utilisé. Dans l’exemple ci-dessus, la première requête échouera. Il est donc recommandé de ne pas utiliser le mot-clé <code>AS</code> lors de la création d’alias de tables. (Note : nous ne pouvons pas faire en sorte que SqlRender gère cela, car il ne peut pas facilement distinguer entre les alias de tables où Oracle n’autorise pas l’utilisation de <code>AS</code>, et les alias de champs, où Oracle nécessite l’utilisation de <code>AS</code>.)</p>
</div>
<div id="tables-temporaires" class="section level4 unnumbered hasAnchor">
<h4>Tables Temporaires<a href="SqlAndR.html#tables-temporaires" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Les tables temporaires peuvent être très utiles pour stocker des résultats intermédiaires, et lorsqu’elles sont utilisées correctement, elles peuvent améliorer considérablement les performances des requêtes. Sur la plupart des plateformes de bases de données, les tables temporaires présentent de très belles propriétés : elles ne sont visibles que par l’utilisateur actuel, sont automatiquement supprimées lorsque la session se termine et peuvent être créées même lorsque l’utilisateur n’a pas d’accès en écriture. Malheureusement, dans Oracle, les tables temporaires sont essentiellement des tables permanentes, avec la seule différence que les données à l’intérieur de la table ne sont visibles que par l’utilisateur actuel. C’est pourquoi, dans Oracle, SqlRender essaiera d’émuler les tables temporaires en</p>
<ol style="list-style-type: decimal">
<li>Ajoutant une chaîne aléatoire au nom de la table afin que les tables de différents utilisateurs ne soient pas en conflit.</li>
<li>Permettant à l’utilisateur de spécifier le schéma où les tables temporaires seront créées.</li>
</ol>
<p>Par exemple :</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="SqlAndR.html#cb31-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * FROM #children;&quot;</span></span>
<span id="cb31-2"><a href="SqlAndR.html#cb31-2" tabindex="-1"></a><span class="fu">translate</span>(sql, <span class="at">targetDialect =</span> <span class="st">&quot;oracle&quot;</span>, <span class="at">oracleTempSchema =</span> <span class="st">&quot;temp_schema&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: The &#39;oracleTempSchema&#39; argument is deprecated. Use &#39;tempEmulationSchema&#39; instead.
## This warning is displayed once every 8 hours.</code></pre>
<pre><code>## [1] &quot;SELECT * FROM temp_schema.a9c8fjrkchildren ;&quot;
## attr(,&quot;sqlDialect&quot;)
## [1] &quot;oracle&quot;</code></pre>
<p>Notez que l’utilisateur devra avoir des privilèges d’écriture sur <code>temp_schema</code>.</p>
<p>Notez également que, parce qu’Oracle a une limite de 30 caractères pour les noms de table, <strong>les noms de tables temporaires ne sont autorisés à avoir que 22 caractères maximum</strong>, car sinon le nom deviendra trop long après l’ajout de l’ID de session.</p>
<p>De plus, rappelez-vous que les tables temporaires ne sont pas automatiquement supprimées sur Oracle, vous devrez donc explicitement <code>TRUNCATE</code> et <code>DROP</code> toutes les tables temporaires une fois que vous avez terminé avec elles pour éviter que des tables orphelines ne s’accumulent dans le schéma temporaire Oracle.</p>
</div>
<div id="conversions-implicites" class="section level4 unnumbered hasAnchor">
<h4>Conversions Implicites<a href="SqlAndR.html#conversions-implicites" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>L’un des rares points où SQL Server est moins explicite que d’autres dialectes est qu’il permet les conversions implicites. Par exemple, ce code fonctionnera sur SQL Server :</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb34-1"><a href="SqlAndR.html#cb34-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> #temp (txt <span class="dt">VARCHAR</span>);</span>
<span id="cb34-2"><a href="SqlAndR.html#cb34-2" tabindex="-1"></a></span>
<span id="cb34-3"><a href="SqlAndR.html#cb34-3" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> #temp</span>
<span id="cb34-4"><a href="SqlAndR.html#cb34-4" tabindex="-1"></a><span class="kw">SELECT</span> <span class="st">&#39;1&#39;</span>;</span>
<span id="cb34-5"><a href="SqlAndR.html#cb34-5" tabindex="-1"></a></span>
<span id="cb34-6"><a href="SqlAndR.html#cb34-6" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> #temp <span class="kw">WHERE</span> txt <span class="op">=</span> <span class="dv">1</span>;</span></code></pre></div>
<p>Même si <code>txt</code> est un champ VARCHAR et que nous le comparons à un entier, SQL Server convertira automatiquement l’une des deux au type correct pour permettre la comparaison. En revanche, d’autres dialectes comme PostgreSQL renverront une erreur lorsqu’ils essaieront de comparer un VARCHAR avec un INT.</p>
<p>Vous devez donc toujours rendre les conversions explicites. Dans l’exemple ci-dessus, la dernière instruction doit être remplacée par soit</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb35-1"><a href="SqlAndR.html#cb35-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> #temp <span class="kw">WHERE</span> txt <span class="op">=</span> <span class="fu">CAST</span>(<span class="dv">1</span> <span class="kw">AS</span> <span class="dt">VARCHAR</span>);</span></code></pre></div>
<p>ou</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb36-1"><a href="SqlAndR.html#cb36-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> #temp <span class="kw">WHERE</span> <span class="fu">CAST</span>(txt <span class="kw">AS</span> <span class="dt">INT</span>) <span class="op">=</span> <span class="dv">1</span>;</span></code></pre></div>
</div>
<div id="sensibilité-à-la-casse-dans-les-comparaisons-de-chaînes" class="section level4 unnumbered hasAnchor">
<h4>Sensibilité à la Casse dans les Comparaisons de Chaînes<a href="SqlAndR.html#sensibilité-à-la-casse-dans-les-comparaisons-de-chaînes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Certaines plateformes SGBD comme SQL Server effectuent toujours des comparaisons de chaînes de manière insensible à la casse, tandis que d’autres comme PostgreSQL sont toujours sensibles à la casse. Il est donc recommandé de toujours supposer des comparaisons sensibles à la casse, et de rendre explicitement les comparaisons insensibles à la casse lorsqu’on n’est pas sûr de la casse. Par exemple, au lieu de</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb37-1"><a href="SqlAndR.html#cb37-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> concept <span class="kw">WHERE</span> concept_class_id <span class="op">=</span> <span class="st">&#39;Clinical Finding&#39;</span></span></code></pre></div>
<p>il est préférable d’utiliser</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb38-1"><a href="SqlAndR.html#cb38-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> concept <span class="kw">WHERE</span> <span class="fu">LOWER</span>(concept_class_id) <span class="op">=</span> <span class="st">&#39;clinical finding&#39;</span></span></code></pre></div>
</div>
<div id="schémas-et-bases-de-données" class="section level4 unnumbered hasAnchor">
<h4>Schémas et Bases de Données<a href="SqlAndR.html#schémas-et-bases-de-données" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Dans SQL Server, les tables sont situées dans un schéma, et les schémas résident dans une base de données. Par exemple, <code>cdm_data.dbo.person</code> fait référence à la table <code>person</code> dans le schéma <code>dbo</code> dans la base de données <code>cdm_data</code>. Dans d’autres dialectes, bien qu’une hiérarchie similaire existe souvent, elle est utilisée de manière très différente. Dans SQL Server, il y a généralement un schéma par base de données (souvent appelé <code>dbo</code>), et les utilisateurs peuvent facilement utiliser des données dans différentes bases de données. Sur d’autres plateformes, par exemple dans PostgreSQL, il n’est pas possible d’utiliser des données entre différentes bases de données dans une seule session, mais il y a souvent de nombreux schémas dans une base de données. Dans PostgreSQL, on pourrait dire que l’équivalent de la base de données de SQL Server est le schéma.</p>
<p>Nous recommandons donc de concaténer la base de données et le schéma de SQL Server en un seul paramètre, que nous appelons généralement <code>@databaseSchema</code>. Par exemple, nous pourrions avoir le SQL paramétré</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb39-1"><a href="SqlAndR.html#cb39-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> @databaseSchema.person</span></code></pre></div>
<p>où sur SQL Server nous pouvons inclure à la fois les noms de base de données et de schéma dans la valeur : <code>databaseSchema = "cdm_data.dbo"</code>. Sur d’autres plateformes, nous pouvons utiliser le même code, mais maintenant seulement spécifier le schéma comme valeur du paramètre : <code>databaseSchema = "cdm_data"</code>.</p>
<p>La seule situation où cela échouera est la commande <code>USE</code>, puisque <code>USE cdm_data.dbo;</code> renverra une erreur. Il est donc préférable de ne pas utiliser la commande <code>USE</code>, mais de toujours spécifier la base de données / le schéma où une table est située.</p>
</div>
<div id="débogage-de-sql-paramétré" class="section level4 unnumbered hasAnchor">
<h4>Débogage de SQL Paramétré<a href="SqlAndR.html#débogage-de-sql-paramétré" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Le débogage de SQL paramétré peut être un peu compliqué. Seul le SQL rendu peut être testé contre un serveur de base de données, mais les modifications du code doivent être effectuées dans le SQL paramétré (pré-rendu). </p>
<p>Une application Shiny est incluse dans le package SqlRender pour éditer de façon interactive le SQL source et générer du SQL rendu et traduit. L’application peut être lancée en utilisant :</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="SqlAndR.html#cb40-1" tabindex="-1"></a><span class="fu">launchSqlRenderDeveloper</span>()</span></code></pre></div>
<p>Cela ouvrira le navigateur par défaut avec l’application montrée sur la Figure <a href="SqlAndR.html#fig:sqlDeveloper">9.1</a>. L’application est également disponible publiquement sur le web.<a href="#fn51" class="footnote-ref" id="fnref51"><sup>51</sup></a></p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:sqlDeveloper"></span>
<img src="images/SqlAndR/sqlDeveloper.png" alt="The SqlDeveloper Shiny app." width="100%" />
<p class="caption">
Figure 9.1: The SqlDeveloper Shiny app.
</p>
</div>
<p>Dans l’application, vous pouvez entrer du SQL OHDSI, sélectionner le dialecte cible ainsi que fournir des valeurs pour les paramètres qui apparaissent dans votre SQL, et la traduction apparaîtra automatiquement en bas.</p>
</div>
</div>
</div>
<div id="DatabaseConnector" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> DatabaseConnector<a href="SqlAndR.html#DatabaseConnector" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://ohdsi.github.io/DatabaseConnector/">DatabaseConnector</a> est un package R pour se connecter à diverses plateformes de bases de données en utilisant les pilotes JDBC de Java. Le package DatabaseConnector est disponible sur CRAN (le Comprehensive R Archive Network), et peut donc être installé en utilisant :</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="SqlAndR.html#cb41-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;DatabaseConnector&quot;</span>)</span></code></pre></div>
<p>DatabaseConnector prend en charge un large éventail de plateformes techniques, y compris les systèmes de bases de données traditionnels (PostgreSQL, Microsoft SQL Server, SQLite, et Oracle), les entrepôts de données parallèles (Microsoft APS, IBM Netezza, et Amazon), ainsi que les plateformes Big Data (Hadoop via Impala, et Google BigQuery). Le package contient déjà la plupart des pilotes, mais en raison de raisons de licence, les pilotes pour BigQuery, Netezza et Impala ne sont pas inclus et doivent être obtenus par l’utilisateur. Tapez <code>?jdbcDrivers</code> pour des instructions sur la manière de télécharger ces pilotes. Une fois téléchargés, vous pouvez utiliser l’argument <code>pathToDriver</code> des fonctions <code>connect</code>, <code>dbConnect</code>, et <code>createConnectionDetails</code>.</p>
<div id="création-dune-connexion" class="section level3 hasAnchor" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Création d’une Connexion<a href="SqlAndR.html#création-dune-connexion" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pour se connecter à une base de données, un certain nombre de détails doivent être spécifiés, tels que la plateforme de la base de données, l’emplacement du serveur, le nom d’utilisateur, et le mot de passe. Nous pouvons appeler la fonction <code>connect</code> et spécifier ces détails directement : </p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="SqlAndR.html#cb42-1" tabindex="-1"></a>conn <span class="ot">&lt;-</span> <span class="fu">connect</span>(<span class="at">dbms =</span> <span class="st">&quot;postgresql&quot;</span>,</span>
<span id="cb42-2"><a href="SqlAndR.html#cb42-2" tabindex="-1"></a>                <span class="at">server =</span> <span class="st">&quot;localhost/postgres&quot;</span>,</span>
<span id="cb42-3"><a href="SqlAndR.html#cb42-3" tabindex="-1"></a>                <span class="at">user =</span> <span class="st">&quot;joe&quot;</span>,</span>
<span id="cb42-4"><a href="SqlAndR.html#cb42-4" tabindex="-1"></a>                <span class="at">password =</span> <span class="st">&quot;secret&quot;</span>,</span>
<span id="cb42-5"><a href="SqlAndR.html#cb42-5" tabindex="-1"></a>                <span class="at">schema =</span> <span class="st">&quot;cdm&quot;</span>)</span></code></pre></div>
<pre><code>## Connecting using PostgreSQL driver</code></pre>
<p>Voir <code>?connect</code> pour des informations sur les détails requis pour chaque plateforme. N’oubliez pas de fermer toute connexion après utilisation :</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="SqlAndR.html#cb44-1" tabindex="-1"></a><span class="fu">disconnect</span>(conn)</span></code></pre></div>
<p>Notez que, au lieu de fournir le nom du serveur, il est également possible de fournir la chaîne de connexion JDBC si cela est plus pratique :</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="SqlAndR.html#cb45-1" tabindex="-1"></a>connString <span class="ot">&lt;-</span> <span class="st">&quot;jdbc:postgresql://localhost:5432/postgres&quot;</span></span>
<span id="cb45-2"><a href="SqlAndR.html#cb45-2" tabindex="-1"></a>conn <span class="ot">&lt;-</span> <span class="fu">connect</span>(<span class="at">dbms =</span> <span class="st">&quot;postgresql&quot;</span>,</span>
<span id="cb45-3"><a href="SqlAndR.html#cb45-3" tabindex="-1"></a>                <span class="at">connectionString =</span> connString,</span>
<span id="cb45-4"><a href="SqlAndR.html#cb45-4" tabindex="-1"></a>                <span class="at">user =</span> <span class="st">&quot;joe&quot;</span>,</span>
<span id="cb45-5"><a href="SqlAndR.html#cb45-5" tabindex="-1"></a>                <span class="at">password =</span> <span class="st">&quot;secret&quot;</span>,</span>
<span id="cb45-6"><a href="SqlAndR.html#cb45-6" tabindex="-1"></a>                <span class="at">schema =</span> <span class="st">&quot;cdm&quot;</span>)</span></code></pre></div>
<pre><code>## Connecting using PostgreSQL driver</code></pre>
<p>Parfois, nous pouvons d’abord spécifier les détails de la connexion et reporter la connexion à plus tard. Cela peut être pratique, par exemple, lorsque la connexion est établie à l’intérieur d’une fonction et que les détails doivent être passés en argument. Nous pouvons utiliser la fonction <code>createConnectionDetails</code> à cette fin :</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="SqlAndR.html#cb47-1" tabindex="-1"></a>details <span class="ot">&lt;-</span> <span class="fu">createConnectionDetails</span>(<span class="at">dbms =</span> <span class="st">&quot;postgresql&quot;</span>,</span>
<span id="cb47-2"><a href="SqlAndR.html#cb47-2" tabindex="-1"></a>                                   <span class="at">server =</span> <span class="st">&quot;localhost/postgres&quot;</span>,</span>
<span id="cb47-3"><a href="SqlAndR.html#cb47-3" tabindex="-1"></a>                                   <span class="at">user =</span> <span class="st">&quot;joe&quot;</span>,</span>
<span id="cb47-4"><a href="SqlAndR.html#cb47-4" tabindex="-1"></a>                                   <span class="at">password =</span> <span class="st">&quot;secret&quot;</span>,</span>
<span id="cb47-5"><a href="SqlAndR.html#cb47-5" tabindex="-1"></a>                                   <span class="at">schema =</span> <span class="st">&quot;cdm&quot;</span>)</span>
<span id="cb47-6"><a href="SqlAndR.html#cb47-6" tabindex="-1"></a>conn <span class="ot">&lt;-</span> <span class="fu">connect</span>(details)</span></code></pre></div>
<pre><code>## Connecting using PostgreSQL driver</code></pre>
</div>
<div id="interroger" class="section level3 hasAnchor" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> Interroger<a href="SqlAndR.html#interroger" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Les principales fonctions pour interroger une base de données sont les fonctions <code>querySql</code> et <code>executeSql</code>. La différence entre ces fonctions est que <code>querySql</code> s’attend à ce que des données soient retournées par la base de données et ne peut gérer qu’une seule instruction SQL à la fois. En revanche, <code>executeSql</code> ne s’attend pas à ce que des données soient retournées et accepte plusieurs instructions SQL dans une seule chaîne SQL. </p>
<p>Quelques exemples :</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="SqlAndR.html#cb49-1" tabindex="-1"></a><span class="fu">querySql</span>(conn, <span class="st">&quot;SELECT TOP 3 * FROM person&quot;</span>)</span></code></pre></div>
<pre><code>##   person_id gender_concept_id year_of_birth
## 1         1              8507          1975
## 2         2              8507          1976
## 3         3              8507          1977</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="SqlAndR.html#cb51-1" tabindex="-1"></a><span class="fu">executeSql</span>(conn, <span class="st">&quot;TRUNCATE TABLE foo; DROP TABLE foo;&quot;</span>)</span></code></pre></div>
<p>Les deux fonctions fournissent des rapports d’erreurs détaillés : Lorsqu’une erreur est générée par le serveur, le message d’erreur et le morceau de SQL en cause sont écrits dans un fichier texte pour permettre un meilleur débogage. La fonction <code>executeSql</code> affiche également par défaut une barre de progression, indiquant le pourcentage des instructions SQL qui ont été exécutées. Si ces attributs ne sont pas souhaités, le package offre également les fonctions <code>lowLevelQuerySql</code> et <code>lowLevelExecuteSql</code>.</p>
</div>
<div id="interroger-en-utilisant-les-objets-ffdf" class="section level3 hasAnchor" number="9.2.3">
<h3><span class="header-section-number">9.2.3</span> Interroger en Utilisant les Objets Ffdf<a href="SqlAndR.html#interroger-en-utilisant-les-objets-ffdf" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Parfois, les données à récupérer de la base de données sont trop grandes pour tenir en mémoire. Comme mentionné dans la Section <a href="OhdsiAnalyticsTools.html#BigDataSupport">8.4.2</a>, dans ce cas, nous pouvons utiliser le package <code>ff</code> pour stocker les objets de données R sur le disque et les utiliser comme s’ils étaient disponibles en mémoire. <code>DatabaseConnector</code> peut télécharger des données directement dans des objets ffdf :</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="SqlAndR.html#cb52-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">querySql.ffdf</span>(conn, <span class="st">&quot;SELECT * FROM person&quot;</span>)</span></code></pre></div>
<p>x est maintenant un objet ffdf.</p>
</div>
<div id="interroger-différentes-plateformes-en-utilisant-le-même-sql" class="section level3 hasAnchor" number="9.2.4">
<h3><span class="header-section-number">9.2.4</span> Interroger Différentes Plateformes en Utilisant le Même SQL<a href="SqlAndR.html#interroger-différentes-plateformes-en-utilisant-le-même-sql" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Les fonctions de commodité suivantes sont disponibles et appellent d’abord les fonctions <code>render</code> et <code>translate</code> du package SqlRender : <code>renderTranslateExecuteSql</code>, <code>renderTranslateQuerySql</code>, <code>renderTranslateQuerySql.ffdf</code>. Par exemple :</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="SqlAndR.html#cb53-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">renderTranslateQuerySql</span>(conn,</span>
<span id="cb53-2"><a href="SqlAndR.html#cb53-2" tabindex="-1"></a>                             <span class="at">sql =</span> <span class="st">&quot;SELECT TOP 10 * FROM @schema.person&quot;</span>,</span>
<span id="cb53-3"><a href="SqlAndR.html#cb53-3" tabindex="-1"></a>                             <span class="at">schema =</span> <span class="st">&quot;cdm_synpuf&quot;</span>)</span></code></pre></div>
<p>Notez que la syntaxe spécifique à SQL Server ‘TOP 10’ sera traduite par exemple en ‘LIMIT 10’ sur PostgreSQL, et que le paramètre SQL <code>@schema</code> sera instancié avec la valeur fournie ‘cdm_synpuf’.</p>
</div>
<div id="insérer-des-tables" class="section level3 hasAnchor" number="9.2.5">
<h3><span class="header-section-number">9.2.5</span> Insérer des Tables<a href="SqlAndR.html#insérer-des-tables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Bien qu’il soit également possible d’insérer des données dans la base de données en envoyant des instructions SQL en utilisant la fonction <code>executeSql</code>, il est souvent plus pratique et plus rapide (grâce à certaines optimisations) d’utiliser la fonction <code>insertTable</code> :</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="SqlAndR.html#cb54-1" tabindex="-1"></a><span class="fu">data</span>(mtcars)</span>
<span id="cb54-2"><a href="SqlAndR.html#cb54-2" tabindex="-1"></a><span class="fu">insertTable</span>(conn, <span class="st">&quot;mtcars&quot;</span>, mtcars, <span class="at">createTable =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Dans cet exemple, nous téléchargeons la dataframe mtcars dans une table appelée ‘mtcars’ sur le serveur, qui sera automatiquement créée.</p>
</div>
</div>
<div id="QueryTheCdm" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Interroger le CDM<a href="SqlAndR.html#QueryTheCdm" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Dans les exemples suivants, nous utilisons SQL d’OHDSI pour interroger une base de données qui adhère au CDM. Ces requêtes utilisent <code>@cdm</code> pour désigner le schéma de base de données où les données du CDM peuvent être trouvées.</p>
<p>Nous pouvons commencer par simplement interroger combien de personnes sont dans la base de données :</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb55-1"><a href="SqlAndR.html#cb55-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> person_count <span class="kw">FROM</span> @cdm.person;</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">PERSON_COUNT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">26299001</td>
</tr>
</tbody>
</table>
<p>Ou peut-être que nous sommes intéressés par la longueur moyenne d’une période d’observation :</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb56-1"><a href="SqlAndR.html#cb56-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">AVG</span>(DATEDIFF(<span class="dt">DAY</span>,</span>
<span id="cb56-2"><a href="SqlAndR.html#cb56-2" tabindex="-1"></a>                    observation_period_start_date,</span>
<span id="cb56-3"><a href="SqlAndR.html#cb56-3" tabindex="-1"></a>                    observation_period_end_date) <span class="op">/</span> <span class="fl">365.25</span>) <span class="kw">AS</span> num_years</span>
<span id="cb56-4"><a href="SqlAndR.html#cb56-4" tabindex="-1"></a><span class="kw">FROM</span> @cdm.observation_period;</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">NUM_YEARS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1.980803</td>
</tr>
</tbody>
</table>
<p>Nous pouvons joindre des tables pour produire des statistiques supplémentaires. Une jointure combine des champs de plusieurs tables, en exigeant généralement que des champs spécifiques des tables aient la même valeur. Par exemple, ici nous joignons la table PERSON avec la table OBSERVATION_PERIOD sur les champs PERSON_ID dans les deux tables. En d’autres termes, le résultat de la jointure est un nouvel ensemble de type table qui contient tous les champs des deux tables, mais dans toutes les lignes, les champs PERSON_ID des deux tables doivent avoir la même valeur. Nous pouvons maintenant, par exemple, calculer l’âge maximum à la fin de l’observation en utilisant le champ OBSERVATION_PERIOD_END_DATE de la table OBSERVATION_PERIOD avec le champ year_of_birth de la table PERSON :</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb57-1"><a href="SqlAndR.html#cb57-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">MAX</span>(<span class="dt">YEAR</span>(observation_period_end_date) <span class="op">-</span></span>
<span id="cb57-2"><a href="SqlAndR.html#cb57-2" tabindex="-1"></a>           year_of_birth) <span class="kw">AS</span> max_age</span>
<span id="cb57-3"><a href="SqlAndR.html#cb57-3" tabindex="-1"></a><span class="kw">FROM</span> @cdm.person</span>
<span id="cb57-4"><a href="SqlAndR.html#cb57-4" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> @cdm.observation_period</span>
<span id="cb57-5"><a href="SqlAndR.html#cb57-5" tabindex="-1"></a>  <span class="kw">ON</span> person.person_id <span class="op">=</span> observation_period.person_id;</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">MAX_AGE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">90</td>
</tr>
</tbody>
</table>
<p>Une requête beaucoup plus compliquée est nécessaire pour déterminer la distribution de l’âge au début de l’observation. Dans cette requête, nous joignons d’abord la table PERSON à la table OBSERVATION_PERIOD pour calculer l’âge au début de l’observation. Nous calculons également l’ordre pour cet ensemble joint en fonction de l’âge, et le stockons sous order_nr. Parce que nous voulons utiliser le résultat de cette jointure plusieurs fois, nous le définissons comme une expression de table commune (CTE) (définie en utilisant <code>WITH ... AS</code>) que nous appelons “ages,” ce qui signifie que nous pouvons référencer ages comme s’il s’agissait d’une table existante. Nous comptons le nombre de lignes dans ages pour produire “n,” puis pour chaque quantile trouvons l’âge minimum où order_nr est inférieur à la fraction multipliée par n. Par exemple, pour trouver la médiane, nous utilisons l’âge minimum où <span class="math inline">\(order\_nr &lt; .50 * n\)</span>. Les âges minimum et maximum sont calculés séparément :</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb58-1"><a href="SqlAndR.html#cb58-1" tabindex="-1"></a><span class="kw">WITH</span> ages</span>
<span id="cb58-2"><a href="SqlAndR.html#cb58-2" tabindex="-1"></a><span class="kw">AS</span> (</span>
<span id="cb58-3"><a href="SqlAndR.html#cb58-3" tabindex="-1"></a>    <span class="kw">SELECT</span> age,</span>
<span id="cb58-4"><a href="SqlAndR.html#cb58-4" tabindex="-1"></a>        <span class="fu">ROW_NUMBER</span>() <span class="kw">OVER</span> (</span>
<span id="cb58-5"><a href="SqlAndR.html#cb58-5" tabindex="-1"></a>            <span class="kw">ORDER</span> <span class="kw">BY</span> age</span>
<span id="cb58-6"><a href="SqlAndR.html#cb58-6" tabindex="-1"></a>            ) order_nr</span>
<span id="cb58-7"><a href="SqlAndR.html#cb58-7" tabindex="-1"></a>    <span class="kw">FROM</span> (</span>
<span id="cb58-8"><a href="SqlAndR.html#cb58-8" tabindex="-1"></a>        <span class="kw">SELECT</span> <span class="dt">YEAR</span>(observation_period_start_date) <span class="op">-</span> year_of_birth <span class="kw">AS</span> age</span>
<span id="cb58-9"><a href="SqlAndR.html#cb58-9" tabindex="-1"></a>        <span class="kw">FROM</span> @cdm.person</span>
<span id="cb58-10"><a href="SqlAndR.html#cb58-10" tabindex="-1"></a>        <span class="kw">INNER</span> <span class="kw">JOIN</span> @cdm.observation_period</span>
<span id="cb58-11"><a href="SqlAndR.html#cb58-11" tabindex="-1"></a>            <span class="kw">ON</span> person.person_id <span class="op">=</span> observation_period.person_id</span>
<span id="cb58-12"><a href="SqlAndR.html#cb58-12" tabindex="-1"></a>        ) age_computed</span>
<span id="cb58-13"><a href="SqlAndR.html#cb58-13" tabindex="-1"></a>    )</span>
<span id="cb58-14"><a href="SqlAndR.html#cb58-14" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">MIN</span>(age) <span class="kw">AS</span> min_age,</span>
<span id="cb58-15"><a href="SqlAndR.html#cb58-15" tabindex="-1"></a>    <span class="fu">MIN</span>(<span class="cf">CASE</span></span>
<span id="cb58-16"><a href="SqlAndR.html#cb58-16" tabindex="-1"></a>            <span class="cf">WHEN</span> order_nr <span class="op">&lt;</span> .<span class="dv">25</span> <span class="op">*</span> n</span>
<span id="cb58-17"><a href="SqlAndR.html#cb58-17" tabindex="-1"></a>                <span class="cf">THEN</span> <span class="dv">9999</span></span>
<span id="cb58-18"><a href="SqlAndR.html#cb58-18" tabindex="-1"></a>            <span class="cf">ELSE</span> age</span>
<span id="cb58-19"><a href="SqlAndR.html#cb58-19" tabindex="-1"></a>            <span class="cf">END</span>) <span class="kw">AS</span> q25_age,</span>
<span id="cb58-20"><a href="SqlAndR.html#cb58-20" tabindex="-1"></a>    <span class="fu">MIN</span>(<span class="cf">CASE</span></span>
<span id="cb58-21"><a href="SqlAndR.html#cb58-21" tabindex="-1"></a>            <span class="cf">WHEN</span> order_nr <span class="op">&lt;</span> .<span class="dv">50</span> <span class="op">*</span> n</span>
<span id="cb58-22"><a href="SqlAndR.html#cb58-22" tabindex="-1"></a>                <span class="cf">THEN</span> <span class="dv">9999</span></span>
<span id="cb58-23"><a href="SqlAndR.html#cb58-23" tabindex="-1"></a>            <span class="cf">ELSE</span> age</span>
<span id="cb58-24"><a href="SqlAndR.html#cb58-24" tabindex="-1"></a>            <span class="cf">END</span>) <span class="kw">AS</span> median_age,</span>
<span id="cb58-25"><a href="SqlAndR.html#cb58-25" tabindex="-1"></a>    <span class="fu">MIN</span>(<span class="cf">CASE</span></span>
<span id="cb58-26"><a href="SqlAndR.html#cb58-26" tabindex="-1"></a>            <span class="cf">WHEN</span> order_nr <span class="op">&lt;</span> .<span class="dv">75</span> <span class="op">*</span> n</span>
<span id="cb58-27"><a href="SqlAndR.html#cb58-27" tabindex="-1"></a>                <span class="cf">THEN</span> <span class="dv">9999</span></span>
<span id="cb58-28"><a href="SqlAndR.html#cb58-28" tabindex="-1"></a>            <span class="cf">ELSE</span> age</span>
<span id="cb58-29"><a href="SqlAndR.html#cb58-29" tabindex="-1"></a>            <span class="cf">END</span>) <span class="kw">AS</span> q75_age,</span>
<span id="cb58-30"><a href="SqlAndR.html#cb58-30" tabindex="-1"></a>    <span class="fu">MAX</span>(age) <span class="kw">AS</span> max_age</span>
<span id="cb58-31"><a href="SqlAndR.html#cb58-31" tabindex="-1"></a><span class="kw">FROM</span> ages</span>
<span id="cb58-32"><a href="SqlAndR.html#cb58-32" tabindex="-1"></a><span class="kw">CROSS</span> <span class="kw">JOIN</span> (</span>
<span id="cb58-33"><a href="SqlAndR.html#cb58-33" tabindex="-1"></a>    <span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> n</span>
<span id="cb58-34"><a href="SqlAndR.html#cb58-34" tabindex="-1"></a>    <span class="kw">FROM</span> ages</span>
<span id="cb58-35"><a href="SqlAndR.html#cb58-35" tabindex="-1"></a>    ) population_size;</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">MIN_AGE</th>
<th align="right">Q25_AGE</th>
<th align="right">MEDIAN_AGE</th>
<th align="right">Q75_AGE</th>
<th align="right">MAX_AGE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">6</td>
<td align="right">17</td>
<td align="right">34</td>
<td align="right">90</td>
</tr>
</tbody>
</table>
<p>Des calculs plus complexes peuvent également être effectués en R au lieu d’utiliser SQL. Par exemple, nous pouvons obtenir la même réponse en utilisant ce code R :</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="SqlAndR.html#cb59-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT YEAR(observation_period_start_date) -</span></span>
<span id="cb59-2"><a href="SqlAndR.html#cb59-2" tabindex="-1"></a><span class="st">               year_of_birth AS age</span></span>
<span id="cb59-3"><a href="SqlAndR.html#cb59-3" tabindex="-1"></a><span class="st">FROM @cdm.person</span></span>
<span id="cb59-4"><a href="SqlAndR.html#cb59-4" tabindex="-1"></a><span class="st">INNER JOIN @cdm.observation_period</span></span>
<span id="cb59-5"><a href="SqlAndR.html#cb59-5" tabindex="-1"></a><span class="st">  ON person.person_id = observation_period.person_id;&quot;</span></span>
<span id="cb59-6"><a href="SqlAndR.html#cb59-6" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">renderTranslateQuerySql</span>(conn, sql, <span class="at">cdm =</span> <span class="st">&quot;cdm&quot;</span>)</span>
<span id="cb59-7"><a href="SqlAndR.html#cb59-7" tabindex="-1"></a><span class="fu">quantile</span>(age[, <span class="dv">1</span>], <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>))</span></code></pre></div>
<pre><code>##   0%  25%  50%  75% 100%
##    0    6   17   34   90</code></pre>
<p>Ici, nous calculons l’âge sur le serveur, téléchargeons tous les âges, puis calculons la distribution des âges. Cependant, cela nécessite le téléchargement de millions de lignes de données depuis le serveur de base de données, et n’est donc pas très efficace. Vous devrez décider au cas par cas si un calcul est mieux effectué en SQL ou en R.</p>
<p>Les requêtes peuvent utiliser les valeurs source dans le CDM. Par exemple, nous pouvons récupérer les 10 codes sources de conditions les plus fréquents en utilisant :</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb61-1"><a href="SqlAndR.html#cb61-1" tabindex="-1"></a><span class="kw">SELECT</span> TOP <span class="dv">10</span> condition_source_value,</span>
<span id="cb61-2"><a href="SqlAndR.html#cb61-2" tabindex="-1"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> code_count</span>
<span id="cb61-3"><a href="SqlAndR.html#cb61-3" tabindex="-1"></a><span class="kw">FROM</span> @cdm.condition_occurrence</span>
<span id="cb61-4"><a href="SqlAndR.html#cb61-4" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> condition_source_value</span>
<span id="cb61-5"><a href="SqlAndR.html#cb61-5" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="op">-</span><span class="fu">COUNT</span>(<span class="op">*</span>);</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">CONDITION_SOURCE_VALUE</th>
<th align="right">CODE_COUNT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4019</td>
<td align="right">49094668</td>
</tr>
<tr class="even">
<td align="right">25000</td>
<td align="right">36149139</td>
</tr>
<tr class="odd">
<td align="right">78099</td>
<td align="right">28908399</td>
</tr>
<tr class="even">
<td align="right">319</td>
<td align="right">25798284</td>
</tr>
<tr class="odd">
<td align="right">31401</td>
<td align="right">22547122</td>
</tr>
<tr class="even">
<td align="right">317</td>
<td align="right">22453999</td>
</tr>
<tr class="odd">
<td align="right">311</td>
<td align="right">19626574</td>
</tr>
<tr class="even">
<td align="right">496</td>
<td align="right">19570098</td>
</tr>
<tr class="odd">
<td align="right">I10</td>
<td align="right">19453451</td>
</tr>
<tr class="even">
<td align="right">3180</td>
<td align="right">18973883</td>
</tr>
</tbody>
</table>
<p>Ici, nous avons regroupé les enregistrements de la table CONDITION_OCCURRENCE par les valeurs du champ CONDITION_SOURCE_VALUE, et avons compté le nombre d’enregistrements dans chaque groupe. Nous récupérons le CONDITION_SOURCE_VALUE et le compte, et les trions par ordre décroissant du compte.</p>
</div>
<div id="utiliser-le-vocabulaire-lors-de-linterrogation" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> Utiliser le Vocabulaire Lors de l’Interrogation<a href="SqlAndR.html#utiliser-le-vocabulaire-lors-de-linterrogation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>De nombreuses opérations nécessitent que le vocabulaire soit utile. Les tables de Vocabulaire font partie du CDM, et sont donc disponibles via des requêtes SQL. Ici, nous montrons comment les requêtes contre le Vocabulaire peuvent être combinées avec des requêtes contre le CDM. De nombreux champs dans le CDM contiennent des identifiants de concept qui peuvent être résolus en utilisant la table CONCEPT. Par exemple, nous voudrions peut-être compter le nombre de personnes dans la base de données stratifiées par sexe, et il serait pratique de résoudre le champ GENDER_CONCEPT_ID en un nom de concept :</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb62-1"><a href="SqlAndR.html#cb62-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> subject_count,</span>
<span id="cb62-2"><a href="SqlAndR.html#cb62-2" tabindex="-1"></a>  concept_name</span>
<span id="cb62-3"><a href="SqlAndR.html#cb62-3" tabindex="-1"></a><span class="kw">FROM</span> @cdm.person</span>
<span id="cb62-4"><a href="SqlAndR.html#cb62-4" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> @cdm.concept</span>
<span id="cb62-5"><a href="SqlAndR.html#cb62-5" tabindex="-1"></a>  <span class="kw">ON</span> person.gender_concept_id <span class="op">=</span> concept.concept_id</span>
<span id="cb62-6"><a href="SqlAndR.html#cb62-6" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> concept_name;</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">SUBJECT_COUNT</th>
<th align="right">CONCEPT_NAME</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">14927548</td>
<td align="right">FEMALE</td>
</tr>
<tr class="even">
<td align="right">11371453</td>
<td align="right">MALE</td>
</tr>
</tbody>
</table>
<p>Une caractéristique très puissante du Vocabulaire est sa hiérarchie. Une requête très courante recherche un concept spécifique <em>et tous ses descendants</em>. Par exemple, imaginons que nous souhaitons compter le nombre de prescriptions contenant l’ingrédient ibuprofène :</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb63-1"><a href="SqlAndR.html#cb63-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> prescription_count</span>
<span id="cb63-2"><a href="SqlAndR.html#cb63-2" tabindex="-1"></a><span class="kw">FROM</span> @cdm.drug_exposure</span>
<span id="cb63-3"><a href="SqlAndR.html#cb63-3" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> @cdm.concept_ancestor</span>
<span id="cb63-4"><a href="SqlAndR.html#cb63-4" tabindex="-1"></a>  <span class="kw">ON</span> drug_concept_id <span class="op">=</span> descendant_concept_id</span>
<span id="cb63-5"><a href="SqlAndR.html#cb63-5" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> @cdm.concept ingredient</span>
<span id="cb63-6"><a href="SqlAndR.html#cb63-6" tabindex="-1"></a>  <span class="kw">ON</span> ancestor_concept_id <span class="op">=</span> ingredient.concept_id</span>
<span id="cb63-7"><a href="SqlAndR.html#cb63-7" tabindex="-1"></a><span class="kw">WHERE</span> <span class="fu">LOWER</span>(ingredient.concept_name) <span class="op">=</span> <span class="st">&#39;ibuprofen&#39;</span></span>
<span id="cb63-8"><a href="SqlAndR.html#cb63-8" tabindex="-1"></a>  <span class="kw">AND</span> ingredient.concept_class_id <span class="op">=</span> <span class="st">&#39;Ingredient&#39;</span></span>
<span id="cb63-9"><a href="SqlAndR.html#cb63-9" tabindex="-1"></a>  <span class="kw">AND</span> ingredient.standard_concept <span class="op">=</span> <span class="st">&#39;S&#39;</span>;</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">PRESCRIPTION_COUNT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">26871214</td>
</tr>
</tbody>
</table>
</div>
<div id="querylibrary" class="section level2 hasAnchor" number="9.5">
<h2><span class="header-section-number">9.5</span> QueryLibrary<a href="SqlAndR.html#querylibrary" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p></p>
<p>QueryLibrary est une bibliothèque de requêtes SQL couramment utilisées pour le CDM. Elle est disponible sous forme d’application en ligne<a href="#fn52" class="footnote-ref" id="fnref52"><sup>52</sup></a> montrée dans la Figure <a href="SqlAndR.html#fig:queryLibrary">9.2</a>, et sous forme de package R.<a href="#fn53" class="footnote-ref" id="fnref53"><sup>53</sup></a></p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:queryLibrary"></span>
<img src="images/SqlAndR/queryLibrary.png" alt="QueryLibrary : une bibliothèque de requêtes SQL contre le CDM." width="100%" />
<p class="caption">
Figure 9.2: QueryLibrary : une bibliothèque de requêtes SQL contre le CDM.
</p>
</div>
<p>L’objectif de la bibliothèque est d’aider les nouveaux utilisateurs à apprendre à interroger le CDM. Les requêtes dans la bibliothèque ont été examinées et approuvées par la communauté OHDSI. La bibliothèque de requêtes est principalement destinée à des fins de formation, mais elle est également une ressource précieuse pour les utilisateurs expérimentés.</p>
<p>La QueryLibrary utilise SqlRender pour produire les requêtes dans le dialecte SQL de votre choix. Les utilisateurs peuvent également spécifier le schéma de la base de données CDM, le schéma de la base de données de vocabulaire (s’ils sont séparés) et le schéma temporaire d’Oracle (si nécessaire), de sorte que les requêtes seront automatiquement rendues avec ces paramètres.</p>
</div>
<div id="concevoir-une-étude-simple" class="section level2 hasAnchor" number="9.6">
<h2><span class="header-section-number">9.6</span> Concevoir une Étude Simple<a href="SqlAndR.html#concevoir-une-étude-simple" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="définition-du-problème" class="section level3 hasAnchor" number="9.6.1">
<h3><span class="header-section-number">9.6.1</span> Définition du Problème<a href="SqlAndR.html#définition-du-problème" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>L’angio-œdème est un effet secondaire bien connu des inhibiteurs de l’ECA (IECA). <span class="citation">Slater et al. (<a href="#ref-slater_1988">1988</a>)</span> estime que le taux d’incidence de l’angio-œdème dans la première semaine de traitement par IECA est d’un cas pour 3 000 patients par semaine. Ici, nous cherchons à reproduire cette constatation, et à stratifier par âge et sexe. Pour simplifier, nous nous concentrons sur un IECA : le lisinopril. Nous répondons donc à la question</p>
<blockquote>
<p>Quel est le taux d’angio-œdème dans la première semaine suivant l’initiation du traitement par lisinopril, stratifié par âge et sexe ?</p>
</blockquote>
</div>
<div id="exposition" class="section level3 hasAnchor" number="9.6.2">
<h3><span class="header-section-number">9.6.2</span> Exposition<a href="SqlAndR.html#exposition" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Nous définirons l’exposition comme la première exposition au lisinopril. Par « première », nous entendons qu’aucune exposition antérieure au lisinopril n’est présente. Nous exigeons 365 jours de temps d’observation continue avant la première exposition.</p>
</div>
<div id="résultat" class="section level3 hasAnchor" number="9.6.3">
<h3><span class="header-section-number">9.6.3</span> Résultat<a href="SqlAndR.html#résultat" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Nous définissons l’angio-œdème comme toute occurrence d’un code de diagnostic d’angio-œdème lors d’une visite en hospitalisation ou aux urgences (ER).</p>
</div>
<div id="temps-à-risque" class="section level3 hasAnchor" number="9.6.4">
<h3><span class="header-section-number">9.6.4</span> Temps à Risque<a href="SqlAndR.html#temps-à-risque" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Nous calculerons le taux d’incidence dans la première semaine suivant l’initiation du traitement, indépendamment de la durée d’exposition des patients pendant la semaine complète.</p>
</div>
</div>
<div id="implémenter-létude-en-utilisant-sql-et-r" class="section level2 hasAnchor" number="9.7">
<h2><span class="header-section-number">9.7</span> Implémenter l’Étude en Utilisant SQL et R<a href="SqlAndR.html#implémenter-létude-en-utilisant-sql-et-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Bien que nous ne soyons pas liés aux conventions des outils OHDSI, il est utile de suivre les mêmes principes. Dans ce cas, nous utiliserons SQL pour peupler une table de cohorte, de la même manière que les outils OHDSI. La table COHORT est définie dans le CDM et possède un ensemble prédéfini de champs que nous utiliserons également. Nous devons d’abord créer la table COHORT dans un schéma de base de données où nous avons accès en écriture, ce qui n’est probablement pas le même que le schéma de base de données qui contient les données au format CDM.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="SqlAndR.html#cb64-1" tabindex="-1"></a><span class="fu">library</span>(DatabaseConnector)</span>
<span id="cb64-2"><a href="SqlAndR.html#cb64-2" tabindex="-1"></a>conn <span class="ot">&lt;-</span> <span class="fu">connect</span>(<span class="at">dbms =</span> <span class="st">&quot;postgresql&quot;</span>,</span>
<span id="cb64-3"><a href="SqlAndR.html#cb64-3" tabindex="-1"></a>                <span class="at">server =</span> <span class="st">&quot;localhost/postgres&quot;</span>,</span>
<span id="cb64-4"><a href="SqlAndR.html#cb64-4" tabindex="-1"></a>                <span class="at">user =</span> <span class="st">&quot;joe&quot;</span>,</span>
<span id="cb64-5"><a href="SqlAndR.html#cb64-5" tabindex="-1"></a>                <span class="at">password =</span> <span class="st">&quot;secret&quot;</span>)</span>
<span id="cb64-6"><a href="SqlAndR.html#cb64-6" tabindex="-1"></a>cdmDbSchema <span class="ot">&lt;-</span> <span class="st">&quot;cdm&quot;</span></span>
<span id="cb64-7"><a href="SqlAndR.html#cb64-7" tabindex="-1"></a>cohortDbSchema <span class="ot">&lt;-</span> <span class="st">&quot;scratch&quot;</span></span>
<span id="cb64-8"><a href="SqlAndR.html#cb64-8" tabindex="-1"></a>cohortTable <span class="ot">&lt;-</span> <span class="st">&quot;my_cohorts&quot;</span></span>
<span id="cb64-9"><a href="SqlAndR.html#cb64-9" tabindex="-1"></a></span>
<span id="cb64-10"><a href="SqlAndR.html#cb64-10" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;</span></span>
<span id="cb64-11"><a href="SqlAndR.html#cb64-11" tabindex="-1"></a><span class="st">CREATE TABLE @cohort_db_schema.@cohort_table (</span></span>
<span id="cb64-12"><a href="SqlAndR.html#cb64-12" tabindex="-1"></a><span class="st">  cohort_definition_id INT,</span></span>
<span id="cb64-13"><a href="SqlAndR.html#cb64-13" tabindex="-1"></a><span class="st">  cohort_start_date DATE,</span></span>
<span id="cb64-14"><a href="SqlAndR.html#cb64-14" tabindex="-1"></a><span class="st">  cohort_end_date DATE,</span></span>
<span id="cb64-15"><a href="SqlAndR.html#cb64-15" tabindex="-1"></a><span class="st">  subject_id BIGINT</span></span>
<span id="cb64-16"><a href="SqlAndR.html#cb64-16" tabindex="-1"></a><span class="st">);</span></span>
<span id="cb64-17"><a href="SqlAndR.html#cb64-17" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb64-18"><a href="SqlAndR.html#cb64-18" tabindex="-1"></a><span class="fu">renderTranslateExecuteSql</span>(conn, sql,</span>
<span id="cb64-19"><a href="SqlAndR.html#cb64-19" tabindex="-1"></a>                          <span class="at">cohort_db_schema =</span> cohortDbSchema,</span>
<span id="cb64-20"><a href="SqlAndR.html#cb64-20" tabindex="-1"></a>                          <span class="at">cohort_table =</span> cohortTable)</span></code></pre></div>
<p>Ici, nous avons paramétré le schéma de base de données et les noms de table, afin de pouvoir les adapter facilement à différents environnements. Le résultat est une table vide sur le serveur de base de données.</p>
<div id="cohorte-dexposition" class="section level3 hasAnchor" number="9.7.1">
<h3><span class="header-section-number">9.7.1</span> Cohorte d’Exposition<a href="SqlAndR.html#cohorte-dexposition" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ensuite, nous créons notre cohorte d’exposition et l’insérons dans notre table COHORT :</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="SqlAndR.html#cb65-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;</span></span>
<span id="cb65-2"><a href="SqlAndR.html#cb65-2" tabindex="-1"></a><span class="st">INSERT INTO @cohort_db_schema.@cohort_table (</span></span>
<span id="cb65-3"><a href="SqlAndR.html#cb65-3" tabindex="-1"></a><span class="st">  cohort_definition_id,</span></span>
<span id="cb65-4"><a href="SqlAndR.html#cb65-4" tabindex="-1"></a><span class="st">  cohort_start_date,</span></span>
<span id="cb65-5"><a href="SqlAndR.html#cb65-5" tabindex="-1"></a><span class="st">  cohort_end_date,</span></span>
<span id="cb65-6"><a href="SqlAndR.html#cb65-6" tabindex="-1"></a><span class="st">  subject_id</span></span>
<span id="cb65-7"><a href="SqlAndR.html#cb65-7" tabindex="-1"></a><span class="st">)</span></span>
<span id="cb65-8"><a href="SqlAndR.html#cb65-8" tabindex="-1"></a><span class="st">SELECT 1 AS cohort_definition_id,</span></span>
<span id="cb65-9"><a href="SqlAndR.html#cb65-9" tabindex="-1"></a><span class="st">  cohort_start_date,</span></span>
<span id="cb65-10"><a href="SqlAndR.html#cb65-10" tabindex="-1"></a><span class="st">  cohort_end_date,</span></span>
<span id="cb65-11"><a href="SqlAndR.html#cb65-11" tabindex="-1"></a><span class="st">  subject_id</span></span>
<span id="cb65-12"><a href="SqlAndR.html#cb65-12" tabindex="-1"></a><span class="st">FROM (</span></span>
<span id="cb65-13"><a href="SqlAndR.html#cb65-13" tabindex="-1"></a><span class="st">  SELECT drug_era_start_date AS cohort_start_date,</span></span>
<span id="cb65-14"><a href="SqlAndR.html#cb65-14" tabindex="-1"></a><span class="st">    drug_era_end_date AS cohort_end_date,</span></span>
<span id="cb65-15"><a href="SqlAndR.html#cb65-15" tabindex="-1"></a><span class="st">    person_id AS subject_id</span></span>
<span id="cb65-16"><a href="SqlAndR.html#cb65-16" tabindex="-1"></a><span class="st">  FROM (</span></span>
<span id="cb65-17"><a href="SqlAndR.html#cb65-17" tabindex="-1"></a><span class="st">    SELECT drug_era_start_date,</span></span>
<span id="cb65-18"><a href="SqlAndR.html#cb65-18" tabindex="-1"></a><span class="st">      drug_era_end_date,</span></span>
<span id="cb65-19"><a href="SqlAndR.html#cb65-19" tabindex="-1"></a><span class="st">      person_id,</span></span>
<span id="cb65-20"><a href="SqlAndR.html#cb65-20" tabindex="-1"></a><span class="st">      ROW_NUMBER() OVER (</span></span>
<span id="cb65-21"><a href="SqlAndR.html#cb65-21" tabindex="-1"></a><span class="st">        PARTITION BY person_id</span></span>
<span id="cb65-22"><a href="SqlAndR.html#cb65-22" tabindex="-1"></a><span class="st">            ORDER BY drug_era_start_date</span></span>
<span id="cb65-23"><a href="SqlAndR.html#cb65-23" tabindex="-1"></a><span class="st">      ) order_nr</span></span>
<span id="cb65-24"><a href="SqlAndR.html#cb65-24" tabindex="-1"></a><span class="st">    FROM @cdm_db_schema.drug_era</span></span>
<span id="cb65-25"><a href="SqlAndR.html#cb65-25" tabindex="-1"></a><span class="st">    WHERE drug_concept_id = 1308216 -- Lisinopril</span></span>
<span id="cb65-26"><a href="SqlAndR.html#cb65-26" tabindex="-1"></a><span class="st">  ) ordered_exposures</span></span>
<span id="cb65-27"><a href="SqlAndR.html#cb65-27" tabindex="-1"></a><span class="st">  WHERE order_nr = 1</span></span>
<span id="cb65-28"><a href="SqlAndR.html#cb65-28" tabindex="-1"></a><span class="st">) first_era</span></span>
<span id="cb65-29"><a href="SqlAndR.html#cb65-29" tabindex="-1"></a><span class="st">INNER JOIN @cdm_db_schema.observation_period</span></span>
<span id="cb65-30"><a href="SqlAndR.html#cb65-30" tabindex="-1"></a><span class="st">  ON subject_id = person_id</span></span>
<span id="cb65-31"><a href="SqlAndR.html#cb65-31" tabindex="-1"></a><span class="st">    AND observation_period_start_date &lt; cohort_start_date</span></span>
<span id="cb65-32"><a href="SqlAndR.html#cb65-32" tabindex="-1"></a><span class="st">    AND observation_period_end_date &gt; cohort_start_date</span></span>
<span id="cb65-33"><a href="SqlAndR.html#cb65-33" tabindex="-1"></a><span class="st">WHERE DATEDIFF(DAY,</span></span>
<span id="cb65-34"><a href="SqlAndR.html#cb65-34" tabindex="-1"></a><span class="st">               observation_period_start_date,</span></span>
<span id="cb65-35"><a href="SqlAndR.html#cb65-35" tabindex="-1"></a><span class="st">               cohort_start_date) &gt;= 365;</span></span>
<span id="cb65-36"><a href="SqlAndR.html#cb65-36" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb65-37"><a href="SqlAndR.html#cb65-37" tabindex="-1"></a></span>
<span id="cb65-38"><a href="SqlAndR.html#cb65-38" tabindex="-1"></a><span class="fu">renderTranslateExecuteSql</span>(conn, sql,</span>
<span id="cb65-39"><a href="SqlAndR.html#cb65-39" tabindex="-1"></a>                          <span class="at">cohort_db_schema =</span> cohortDbSchema,</span>
<span id="cb65-40"><a href="SqlAndR.html#cb65-40" tabindex="-1"></a>                          <span class="at">cohort_table =</span> cohortTable,</span>
<span id="cb65-41"><a href="SqlAndR.html#cb65-41" tabindex="-1"></a>                          <span class="at">cdm_db_schema =</span> cdmDbSchema)</span></code></pre></div>
<p>Ici, nous utilisons la table DRUG_ERA, une table standard dans le CDM automatiquement dérivée de la table DRUG_EXPOSURE. La table DRUG_ERA contient des ères d’exposition continue au niveau de l’ingrédient. Nous pouvons ainsi rechercher le lisinopril, et cela identifiera automatiquement toutes les expositions aux médicaments contenant du lisinopril. Nous prenons la première exposition au médicament par personne, puis nous joignons cela à la table OBSERVATION_PERIOD. Étant donné qu’une personne peut avoir plusieurs périodes d’observation, nous devons nous assurer que nous ne joignons que la période contenant l’exposition au médicament. Nous exigeons ensuite au moins 365 jours entre la OBSERVATION_PERIOD_START_DATE et la COHORT_START_DATE.</p>
</div>
<div id="cohorte-de-résultat" class="section level3 hasAnchor" number="9.7.2">
<h3><span class="header-section-number">9.7.2</span> Cohorte de Résultat<a href="SqlAndR.html#cohorte-de-résultat" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Enfin, nous devons créer notre cohorte de résultat :</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="SqlAndR.html#cb66-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;</span></span>
<span id="cb66-2"><a href="SqlAndR.html#cb66-2" tabindex="-1"></a><span class="st">INSERT INTO @cohort_db_schema.@cohort_table (</span></span>
<span id="cb66-3"><a href="SqlAndR.html#cb66-3" tabindex="-1"></a><span class="st"> cohort_definition_id,</span></span>
<span id="cb66-4"><a href="SqlAndR.html#cb66-4" tabindex="-1"></a><span class="st"> cohort_start_date,</span></span>
<span id="cb66-5"><a href="SqlAndR.html#cb66-5" tabindex="-1"></a><span class="st"> cohort_end_date,</span></span>
<span id="cb66-6"><a href="SqlAndR.html#cb66-6" tabindex="-1"></a><span class="st">subject_id</span></span>
<span id="cb66-7"><a href="SqlAndR.html#cb66-7" tabindex="-1"></a><span class="st">)</span></span>
<span id="cb66-8"><a href="SqlAndR.html#cb66-8" tabindex="-1"></a><span class="st">SELECT 2 AS cohort_definition_id,</span></span>
<span id="cb66-9"><a href="SqlAndR.html#cb66-9" tabindex="-1"></a><span class="st">  cohort_start_date,</span></span>
<span id="cb66-10"><a href="SqlAndR.html#cb66-10" tabindex="-1"></a><span class="st">  cohort_end_date,</span></span>
<span id="cb66-11"><a href="SqlAndR.html#cb66-11" tabindex="-1"></a><span class="st">  subject_id</span></span>
<span id="cb66-12"><a href="SqlAndR.html#cb66-12" tabindex="-1"></a><span class="st">FROM (</span></span>
<span id="cb66-13"><a href="SqlAndR.html#cb66-13" tabindex="-1"></a><span class="st">  SELECT DISTINCT person_id AS subject_id,</span></span>
<span id="cb66-14"><a href="SqlAndR.html#cb66-14" tabindex="-1"></a><span class="st">    condition_start_date AS cohort_start_date,</span></span>
<span id="cb66-15"><a href="SqlAndR.html#cb66-15" tabindex="-1"></a><span class="st">    condition_end_date AS cohort_end_date</span></span>
<span id="cb66-16"><a href="SqlAndR.html#cb66-16" tabindex="-1"></a><span class="st">  FROM @cdm_db_schema.condition_occurrence</span></span>
<span id="cb66-17"><a href="SqlAndR.html#cb66-17" tabindex="-1"></a><span class="st">  INNER JOIN @cdm_db_schema.concept_ancestor</span></span>
<span id="cb66-18"><a href="SqlAndR.html#cb66-18" tabindex="-1"></a><span class="st">    ON condition_concept_id = descendant_concept_id</span></span>
<span id="cb66-19"><a href="SqlAndR.html#cb66-19" tabindex="-1"></a><span class="st">  WHERE ancestor_concept_id = 432791 -- Angioedema</span></span>
<span id="cb66-20"><a href="SqlAndR.html#cb66-20" tabindex="-1"></a><span class="st">) distinct_occurrence</span></span>
<span id="cb66-21"><a href="SqlAndR.html#cb66-21" tabindex="-1"></a><span class="st">INNER JOIN @cdm_db_schema.visit_occurrence</span></span>
<span id="cb66-22"><a href="SqlAndR.html#cb66-22" tabindex="-1"></a><span class="st">  ON subject_id = person_id</span></span>
<span id="cb66-23"><a href="SqlAndR.html#cb66-23" tabindex="-1"></a><span class="st">  AND visit_start_date &lt;= cohort_start_date</span></span>
<span id="cb66-24"><a href="SqlAndR.html#cb66-24" tabindex="-1"></a><span class="st">  AND visit_end_date &gt;= cohort_start_date</span></span>
<span id="cb66-25"><a href="SqlAndR.html#cb66-25" tabindex="-1"></a><span class="st">WHERE visit_concept_id IN (262, 9203,</span></span>
<span id="cb66-26"><a href="SqlAndR.html#cb66-26" tabindex="-1"></a><span class="st">    9201) -- Inpatient or ER;</span></span>
<span id="cb66-27"><a href="SqlAndR.html#cb66-27" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb66-28"><a href="SqlAndR.html#cb66-28" tabindex="-1"></a></span>
<span id="cb66-29"><a href="SqlAndR.html#cb66-29" tabindex="-1"></a><span class="fu">renderTranslateExecuteSql</span>(conn, sql,</span>
<span id="cb66-30"><a href="SqlAndR.html#cb66-30" tabindex="-1"></a>                          <span class="at">cohort_db_schema =</span> cohortDbSchema,</span>
<span id="cb66-31"><a href="SqlAndR.html#cb66-31" tabindex="-1"></a>                          <span class="at">cohort_table =</span> cohortTable,</span>
<span id="cb66-32"><a href="SqlAndR.html#cb66-32" tabindex="-1"></a>                          <span class="at">cdm_db_schema =</span> cdmDbSchema)</span></code></pre></div>
<p>Ici, nous joignons la table CONDITION_OCCURRENCE à la table CONCEPT_ANCESTOR pour trouver toutes les occurrences d’angioedème ou de ses descendants. Nous utilisons DISTINCT pour nous assurer de ne sélectionner qu’un seul enregistrement par jour, car nous pensons que plusieurs diagnostics d’angioedème le même jour sont plus susceptibles d’être la même occurrence plutôt que plusieurs événements distincts d’angioedème. Nous joignons ces occurrences à la table VISIT_OCCURRENCE pour nous assurer que le diagnostic a été fait en milieu hospitalier ou aux urgences.</p>
</div>
<div id="calcul-du-taux-dincidence" class="section level3 hasAnchor" number="9.7.3">
<h3><span class="header-section-number">9.7.3</span> Calcul du Taux d’Incidence<a href="SqlAndR.html#calcul-du-taux-dincidence" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Maintenant que nos cohortes sont en place, nous pouvons calculer le taux d’incidence, stratifié par âge et sexe :</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="SqlAndR.html#cb67-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;</span></span>
<span id="cb67-2"><a href="SqlAndR.html#cb67-2" tabindex="-1"></a><span class="st">WITH tar AS (</span></span>
<span id="cb67-3"><a href="SqlAndR.html#cb67-3" tabindex="-1"></a><span class="st">  SELECT concept_name AS gender,</span></span>
<span id="cb67-4"><a href="SqlAndR.html#cb67-4" tabindex="-1"></a><span class="st">    FLOOR((YEAR(cohort_start_date) -</span></span>
<span id="cb67-5"><a href="SqlAndR.html#cb67-5" tabindex="-1"></a><span class="st">          year_of_birth) / 10) AS age,</span></span>
<span id="cb67-6"><a href="SqlAndR.html#cb67-6" tabindex="-1"></a><span class="st">    subject_id,</span></span>
<span id="cb67-7"><a href="SqlAndR.html#cb67-7" tabindex="-1"></a><span class="st">    cohort_start_date,</span></span>
<span id="cb67-8"><a href="SqlAndR.html#cb67-8" tabindex="-1"></a><span class="st">    CASE WHEN DATEADD(DAY, 7, cohort_start_date) &gt;</span></span>
<span id="cb67-9"><a href="SqlAndR.html#cb67-9" tabindex="-1"></a><span class="st">      observation_period_end_date</span></span>
<span id="cb67-10"><a href="SqlAndR.html#cb67-10" tabindex="-1"></a><span class="st">    THEN observation_period_end_date</span></span>
<span id="cb67-11"><a href="SqlAndR.html#cb67-11" tabindex="-1"></a><span class="st">    ELSE DATEADD(DAY, 7, cohort_start_date)</span></span>
<span id="cb67-12"><a href="SqlAndR.html#cb67-12" tabindex="-1"></a><span class="st">    END AS cohort_end_date</span></span>
<span id="cb67-13"><a href="SqlAndR.html#cb67-13" tabindex="-1"></a><span class="st">  FROM @cohort_db_schema.@cohort_table</span></span>
<span id="cb67-14"><a href="SqlAndR.html#cb67-14" tabindex="-1"></a><span class="st">  INNER JOIN @cdm_db_schema.observation_period</span></span>
<span id="cb67-15"><a href="SqlAndR.html#cb67-15" tabindex="-1"></a><span class="st">    ON subject_id = observation_period.person_id</span></span>
<span id="cb67-16"><a href="SqlAndR.html#cb67-16" tabindex="-1"></a><span class="st">      AND observation_period_start_date &lt; cohort_start_date</span></span>
<span id="cb67-17"><a href="SqlAndR.html#cb67-17" tabindex="-1"></a><span class="st">      AND observation_period_end_date &gt; cohort_start_date</span></span>
<span id="cb67-18"><a href="SqlAndR.html#cb67-18" tabindex="-1"></a><span class="st">  INNER JOIN @cdm_db_schema.person</span></span>
<span id="cb67-19"><a href="SqlAndR.html#cb67-19" tabindex="-1"></a><span class="st">    ON subject_id = person.person_id</span></span>
<span id="cb67-20"><a href="SqlAndR.html#cb67-20" tabindex="-1"></a><span class="st">  INNER JOIN @cdm_db_schema.concept</span></span>
<span id="cb67-21"><a href="SqlAndR.html#cb67-21" tabindex="-1"></a><span class="st">    ON gender_concept_id = concept_id</span></span>
<span id="cb67-22"><a href="SqlAndR.html#cb67-22" tabindex="-1"></a><span class="st">  WHERE cohort_definition_id = 1 -- Exposure</span></span>
<span id="cb67-23"><a href="SqlAndR.html#cb67-23" tabindex="-1"></a><span class="st">)</span></span>
<span id="cb67-24"><a href="SqlAndR.html#cb67-24" tabindex="-1"></a><span class="st">SELECT days.gender,</span></span>
<span id="cb67-25"><a href="SqlAndR.html#cb67-25" tabindex="-1"></a><span class="st">    days.age,</span></span>
<span id="cb67-26"><a href="SqlAndR.html#cb67-26" tabindex="-1"></a><span class="st">    days,</span></span>
<span id="cb67-27"><a href="SqlAndR.html#cb67-27" tabindex="-1"></a><span class="st">    CASE WHEN events IS NULL THEN 0 ELSE events END AS events</span></span>
<span id="cb67-28"><a href="SqlAndR.html#cb67-28" tabindex="-1"></a><span class="st">FROM (</span></span>
<span id="cb67-29"><a href="SqlAndR.html#cb67-29" tabindex="-1"></a><span class="st">  SELECT gender,</span></span>
<span id="cb67-30"><a href="SqlAndR.html#cb67-30" tabindex="-1"></a><span class="st">    age,</span></span>
<span id="cb67-31"><a href="SqlAndR.html#cb67-31" tabindex="-1"></a><span class="st">    SUM(DATEDIFF(DAY, cohort_start_date,</span></span>
<span id="cb67-32"><a href="SqlAndR.html#cb67-32" tabindex="-1"></a><span class="st">      cohort_end_date)) AS days</span></span>
<span id="cb67-33"><a href="SqlAndR.html#cb67-33" tabindex="-1"></a><span class="st">  FROM tar</span></span>
<span id="cb67-34"><a href="SqlAndR.html#cb67-34" tabindex="-1"></a><span class="st">  GROUP BY gender,</span></span>
<span id="cb67-35"><a href="SqlAndR.html#cb67-35" tabindex="-1"></a><span class="st">    age</span></span>
<span id="cb67-36"><a href="SqlAndR.html#cb67-36" tabindex="-1"></a><span class="st">) days</span></span>
<span id="cb67-37"><a href="SqlAndR.html#cb67-37" tabindex="-1"></a><span class="st">LEFT JOIN (</span></span>
<span id="cb67-38"><a href="SqlAndR.html#cb67-38" tabindex="-1"></a><span class="st">  SELECT gender,</span></span>
<span id="cb67-39"><a href="SqlAndR.html#cb67-39" tabindex="-1"></a><span class="st">      age,</span></span>
<span id="cb67-40"><a href="SqlAndR.html#cb67-40" tabindex="-1"></a><span class="st">      COUNT(*) AS events</span></span>
<span id="cb67-41"><a href="SqlAndR.html#cb67-41" tabindex="-1"></a><span class="st">  FROM tar</span></span>
<span id="cb67-42"><a href="SqlAndR.html#cb67-42" tabindex="-1"></a><span class="st">  INNER JOIN @cohort_db_schema.@cohort_table angioedema</span></span>
<span id="cb67-43"><a href="SqlAndR.html#cb67-43" tabindex="-1"></a><span class="st">    ON tar.subject_id = angioedema.subject_id</span></span>
<span id="cb67-44"><a href="SqlAndR.html#cb67-44" tabindex="-1"></a><span class="st">      AND tar.cohort_start_date &lt;= angioedema.cohort_start_date</span></span>
<span id="cb67-45"><a href="SqlAndR.html#cb67-45" tabindex="-1"></a><span class="st">      AND tar.cohort_end_date &gt;= angioedema.cohort_start_date</span></span>
<span id="cb67-46"><a href="SqlAndR.html#cb67-46" tabindex="-1"></a><span class="st">  WHERE cohort_definition_id = 2 -- Outcome</span></span>
<span id="cb67-47"><a href="SqlAndR.html#cb67-47" tabindex="-1"></a><span class="st">  GROUP BY gender,</span></span>
<span id="cb67-48"><a href="SqlAndR.html#cb67-48" tabindex="-1"></a><span class="st">    age</span></span>
<span id="cb67-49"><a href="SqlAndR.html#cb67-49" tabindex="-1"></a><span class="st">) events</span></span>
<span id="cb67-50"><a href="SqlAndR.html#cb67-50" tabindex="-1"></a><span class="st">ON days.gender = events.gender</span></span>
<span id="cb67-51"><a href="SqlAndR.html#cb67-51" tabindex="-1"></a><span class="st">  AND days.age = events.age;</span></span>
<span id="cb67-52"><a href="SqlAndR.html#cb67-52" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb67-53"><a href="SqlAndR.html#cb67-53" tabindex="-1"></a></span>
<span id="cb67-54"><a href="SqlAndR.html#cb67-54" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">renderTranslateQuerySql</span>(conn, sql,</span>
<span id="cb67-55"><a href="SqlAndR.html#cb67-55" tabindex="-1"></a>                                   <span class="at">cohort_db_schema =</span> cohortDbSchema,</span>
<span id="cb67-56"><a href="SqlAndR.html#cb67-56" tabindex="-1"></a>                                   <span class="at">cohort_table =</span> cohortTable,</span>
<span id="cb67-57"><a href="SqlAndR.html#cb67-57" tabindex="-1"></a>                                   <span class="at">cdm_db_schema =</span> cdmDbSchema,</span>
<span id="cb67-58"><a href="SqlAndR.html#cb67-58" tabindex="-1"></a>                                   <span class="at">snakeCaseToCamelCase =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Nous créons d’abord “tar,” un CTE qui contient toutes les expositions avec le temps à risque approprié. Notez que nous tronquons le temps à risque à la OBSERVATION_PERIOD_END_DATE. Nous calculons également l’âge par tranche de 10 ans et identifions le genre. L’avantage d’utiliser un CTE est que nous pouvons utiliser le même ensemble de résultats intermédiaires plusieurs fois dans une requête. Dans ce cas, nous l’utilisons pour compter la quantité totale de temps à risque, ainsi que le nombre d’événements d’angioedème qui se produisent pendant le temps à risque.</p>
<p>Nous utilisons <code>snakeCaseToCamelCase = TRUE</code> car en SQL, nous avons tendance à utiliser snake_case pour les noms de champs (parce que SQL est insensible à la casse), tandis qu’en R nous avons tendance à utiliser camelCase (parce que R est sensible à la casse). Les noms de colonnes du data frame <code>results</code> seront maintenant en camelCase.</p>
<p>Avec l’aide du package ggplot2, nous pouvons facilement tracer nos résultats :</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="SqlAndR.html#cb68-1" tabindex="-1"></a><span class="co"># Calculer le taux d&#39;incidence (IR) :</span></span>
<span id="cb68-2"><a href="SqlAndR.html#cb68-2" tabindex="-1"></a>results<span class="sc">$</span>ir <span class="ot">&lt;-</span> <span class="dv">1000</span> <span class="sc">*</span> results<span class="sc">$</span>events <span class="sc">/</span> results<span class="sc">$</span>days <span class="sc">/</span> <span class="dv">7</span></span>
<span id="cb68-3"><a href="SqlAndR.html#cb68-3" tabindex="-1"></a></span>
<span id="cb68-4"><a href="SqlAndR.html#cb68-4" tabindex="-1"></a><span class="co"># Corriger l&#39;échelle d&#39;âge:</span></span>
<span id="cb68-5"><a href="SqlAndR.html#cb68-5" tabindex="-1"></a>results<span class="sc">$</span>age <span class="ot">&lt;-</span> results<span class="sc">$</span>age <span class="sc">*</span> <span class="dv">10</span></span>
<span id="cb68-6"><a href="SqlAndR.html#cb68-6" tabindex="-1"></a></span>
<span id="cb68-7"><a href="SqlAndR.html#cb68-7" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb68-8"><a href="SqlAndR.html#cb68-8" tabindex="-1"></a><span class="fu">ggplot</span>(results, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> ir, <span class="at">group =</span> gender, <span class="at">color =</span> gender)) <span class="sc">+</span></span>
<span id="cb68-9"><a href="SqlAndR.html#cb68-9" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb68-10"><a href="SqlAndR.html#cb68-10" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Âge&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-11"><a href="SqlAndR.html#cb68-11" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Incidence (pour 1 000 patients-semaines)&quot;</span>)</span></code></pre></div>
<p><img src="images/SqlAndR/ir.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="nettoyage" class="section level3 hasAnchor" number="9.7.4">
<h3><span class="header-section-number">9.7.4</span> Nettoyage<a href="SqlAndR.html#nettoyage" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>N’oubliez pas de nettoyer la table que nous avons créée et de fermer la connexion :</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="SqlAndR.html#cb69-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;</span></span>
<span id="cb69-2"><a href="SqlAndR.html#cb69-2" tabindex="-1"></a><span class="st">TRUNCATE TABLE @cohort_db_schema.@cohort_table;</span></span>
<span id="cb69-3"><a href="SqlAndR.html#cb69-3" tabindex="-1"></a><span class="st">DROP TABLE @cohort_db_schema.@cohort_table;</span></span>
<span id="cb69-4"><a href="SqlAndR.html#cb69-4" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb69-5"><a href="SqlAndR.html#cb69-5" tabindex="-1"></a><span class="fu">renderTranslateExecuteSql</span>(conn, sql,</span>
<span id="cb69-6"><a href="SqlAndR.html#cb69-6" tabindex="-1"></a>                          <span class="at">cohort_db_schema =</span> cohortDbSchema,</span>
<span id="cb69-7"><a href="SqlAndR.html#cb69-7" tabindex="-1"></a>                          <span class="at">cohort_table =</span> cohortTable)</span>
<span id="cb69-8"><a href="SqlAndR.html#cb69-8" tabindex="-1"></a></span>
<span id="cb69-9"><a href="SqlAndR.html#cb69-9" tabindex="-1"></a><span class="fu">disconnect</span>(conn)</span></code></pre></div>
</div>
<div id="compatibilité" class="section level3 hasAnchor" number="9.7.5">
<h3><span class="header-section-number">9.7.5</span> Compatibilité<a href="SqlAndR.html#compatibilité" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Parce que nous utilisons OHDSI SQL avec DatabaseConnector et SqlRender partout, le code que nous avons examiné ici fonctionnera sur toutes les plateformes de base de données prises en charge par OHDSI.</p>
<p>Notez que, à des fins de démonstration, nous avons choisi de créer nos cohortes en utilisant du SQL écrit à la main. Il aurait probablement été plus pratique de construire la définition de la cohorte dans ATLAS, et d’utiliser le SQL généré par ATLAS pour instancier les cohortes. ATLAS produit également du SQL OHDSI et peut donc facilement être utilisé avec SqlRender et DatabaseConnector.</p>
</div>
</div>
<div id="résumé-7" class="section level2 hasAnchor" number="9.8">
<h2><span class="header-section-number">9.8</span> Résumé<a href="SqlAndR.html#résumé-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>

<div class="rmdsummary">
<ul>
<li><p><strong>SQL</strong> (Structured Query Language) est un langage standard pour interroger les bases de données, y compris celles qui sont conformes au Common Data Model (CDM).</p></li>
<li><p>Différentes plateformes de bases de données ont des dialectes SQL différents et nécessitent des outils différents pour les interroger.</p></li>
<li><p>Les packages R <strong>SqlRender</strong> et <strong>DatabaseConnector</strong> fournissent un moyen unifié pour interroger les données dans le CDM, permettant au même code d’analyse de s’exécuter dans différents environnements sans modification.</p></li>
<li><p>En utilisant R et SQL ensemble, nous pouvons mettre en œuvre des analyses personnalisées qui ne sont pas prises en charge par les outils OHDSI.</p></li>
<li><p>La <strong>QueryLibrary</strong> fournit une collection de requêtes SQL réutilisables pour le CDM.</p></li>
</ul>
</div>
</div>
<div id="exercices-4" class="section level2 hasAnchor" number="9.9">
<h2><span class="header-section-number">9.9</span> Exercices<a href="SqlAndR.html#exercices-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="prérequis-3" class="section level4 unnumbered hasAnchor">
<h4>Prérequis<a href="SqlAndR.html#prérequis-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Pour ces exercices, nous supposons que R, R-Studio et Java ont été installés comme décrit dans la section <a href="OhdsiAnalyticsTools.html#installR">8.4.5</a>. Les packages <a href="https://ohdsi.github.io/SqlRender/">SqlRender</a>, <a href="https://ohdsi.github.io/DatabaseConnector/">DatabaseConnector</a> et <a href="https://ohdsi.github.io/Eunomia/">Eunomia</a> sont également nécessaires et peuvent être installés en utilisant :</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="SqlAndR.html#cb70-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;SqlRender&quot;</span>, <span class="st">&quot;DatabaseConnector&quot;</span>, <span class="st">&quot;remotes&quot;</span>))</span>
<span id="cb70-2"><a href="SqlAndR.html#cb70-2" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;ohdsi/Eunomia&quot;</span>, <span class="at">ref =</span> <span class="st">&quot;v1.0.0&quot;</span>)</span></code></pre></div>
<p>Le package Eunomia fournit un ensemble de données simulé dans le CDM qui s’exécute au sein de votre session R locale. Les détails de connexion peuvent être obtenus en utilisant :</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="SqlAndR.html#cb71-1" tabindex="-1"></a>connectionDetails <span class="ot">&lt;-</span> Eunomia<span class="sc">::</span><span class="fu">getEunomiaConnectionDetails</span>()</span></code></pre></div>
<p>Le schéma de la base de données CDM est “main”.</p>
<div class="exercise">
<p><span id="exr:exercisePeopleCount" class="exercise"><strong>Exercice 9.1  </strong></span>En utilisant SQL et R, calculez combien de personnes se trouvent dans la base de données.</p>
</div>
<div class="exercise">
<p><span id="exr:exerciseCelecoxibUsers" class="exercise"><strong>Exercice 9.2  </strong></span>En utilisant SQL et R, calculez combien de personnes ont au moins une prescription de célécoxib.</p>
</div>
<div class="exercise">
<p><span id="exr:exerciseGiBleedsDuringCelecoxib" class="exercise"><strong>Exercice 9.3  </strong></span>En utilisant SQL et R, calculez combien de diagnostics d’hémorragie gastro-intestinale surviennent pendant l’exposition au célécoxib. (Indice : l’ID de concept pour l’hémorragie gastro-intestinale est <a href="http://athena.ohdsi.org/search-terms/terms/192671">192671</a>.)</p>
</div>
<p>Les réponses suggérées se trouvent dans l’Appendice <a href="#SqlAndRanswers"><strong>??</strong></a>.</p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-slater_1988" class="csl-entry">
Slater, Eve E., Debora D. Merrill, Harry A. Guess, Peter J. Roylance, Warren D. Cooper, William H. W. Inman, and Pamela W. Ewan. 1988. <span>“<span class="nocase">Clinical Profile of Angioedema Associated With Angiotensin Converting-Enzyme Inhibition</span>.”</span> <em>JAMA</em> 260 (7): 967–70. <a href="https://doi.org/10.1001/jama.1988.03410070095035">https://doi.org/10.1001/jama.1988.03410070095035</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="51">
<li id="fn51"><p><a href="http://data.ohdsi.org/SqlDeveloper/" class="uri">http://data.ohdsi.org/SqlDeveloper/</a><a href="SqlAndR.html#fnref51" class="footnote-back">↩︎</a></p></li>
<li id="fn52"><p><a href="http://data.ohdsi.org/QueryLibrary" class="uri">http://data.ohdsi.org/QueryLibrary</a><a href="SqlAndR.html#fnref52" class="footnote-back">↩︎</a></p></li>
<li id="fn53"><p><a href="https://github.com/OHDSI/QueryLibrary" class="uri">https://github.com/OHDSI/QueryLibrary</a><a href="SqlAndR.html#fnref53" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="OhdsiAnalyticsTools.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Cohortes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/OHDSI/TheBookOfOhdsi/edit/master/SqlAndR.Rmd",
"text": "Modifier"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["TheBookOfOhdsi.pdf", "TheBookOfOhdsi.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
